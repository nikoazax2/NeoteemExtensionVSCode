"use strict";var A=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var hr=A((wl,fr)=>{"use strict";var ut=require("vscode"),{exec:Vi}=require("child_process");async function Yi(t){let e=ut.workspace.workspaceFolders[0].uri.path.split("/")[ut.workspace.workspaceFolders[0].uri.path.split("/").length-1],r=ut.workspace.getConfiguration("NeoteemExtension"),s=r.get("urlBBFront"),n=r.get("urlBBBack"),i=`https://bitbucket.org/${s}/${e}/branches/?status=all`,u=`https://bitbucket.org/${n}/${e}/branches/?status=all`,o=ut.commands.registerCommand("extension.openBitbucketRepo",async()=>{let h=r.get("chromeProfile"),p="C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe",l;JSON.parse(r.get("nomsBBBack")).includes(e)?l=`"${p}" --profile-directory="${h}" "${u}"`:l=`"${p}" --profile-directory="${h}" "${i}"`,Vi(l,(m,S,x)=>{m?console.error(`Error opening Chrome: ${m.message}`):console.log(`Chrome opened with profile: ${h}`)})}),f=ut.window.createStatusBarItem(ut.StatusBarAlignment.Left,1e5);f.text=`$(github-inverted)  Bitbucket ${e}`,f.tooltip=`Ouvrir le repo Bitbucket ${e}`,f.command="extension.openBitbucketRepo",f.show(),t.subscriptions.push(f,o)}fr.exports={OuvrirProjetBB:Yi}});var mr=A((vl,dr)=>{var ct=1e3,lt=ct*60,pt=lt*60,tt=pt*24,Ji=tt*7,Qi=tt*365.25;dr.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Xi(t);if(r==="number"&&isFinite(t))return e.long?Zi(t):Ki(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Xi(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),s=(e[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return r*Qi;case"weeks":case"week":case"w":return r*Ji;case"days":case"day":case"d":return r*tt;case"hours":case"hour":case"hrs":case"hr":case"h":return r*pt;case"minutes":case"minute":case"mins":case"min":case"m":return r*lt;case"seconds":case"second":case"secs":case"sec":case"s":return r*ct;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Ki(t){var e=Math.abs(t);return e>=tt?Math.round(t/tt)+"d":e>=pt?Math.round(t/pt)+"h":e>=lt?Math.round(t/lt)+"m":e>=ct?Math.round(t/ct)+"s":t+"ms"}function Zi(t){var e=Math.abs(t);return e>=tt?jt(t,e,tt,"day"):e>=pt?jt(t,e,pt,"hour"):e>=lt?jt(t,e,lt,"minute"):e>=ct?jt(t,e,ct,"second"):t+" ms"}function jt(t,e,r,s){var n=e>=r*1.5;return Math.round(t/r)+" "+s+(n?"s":"")}});var le=A((bl,gr)=>{function ta(t){r.debug=r,r.default=r,r.coerce=f,r.disable=i,r.enable=n,r.enabled=u,r.humanize=mr(),r.destroy=h,Object.keys(t).forEach(p=>{r[p]=t[p]}),r.names=[],r.skips=[],r.formatters={};function e(p){let l=0;for(let d=0;d<p.length;d++)l=(l<<5)-l+p.charCodeAt(d),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=e;function r(p){let l,d=null,m,S;function x(...P){if(!x.enabled)return;let Q=x,at=Number(new Date),ae=at-(l||at);Q.diff=ae,Q.prev=l,Q.curr=at,l=at,P[0]=r.coerce(P[0]),typeof P[0]!="string"&&P.unshift("%O");let ot=0;P[0]=P[0].replace(/%([a-zA-Z%])/g,(vt,oe)=>{if(vt==="%%")return"%";ot++;let Bt=r.formatters[oe];if(typeof Bt=="function"){let ue=P[ot];vt=Bt.call(Q,ue),P.splice(ot,1),ot--}return vt}),r.formatArgs.call(Q,P),(Q.log||r.log).apply(Q,P)}return x.namespace=p,x.useColors=r.useColors(),x.color=r.selectColor(p),x.extend=s,x.destroy=r.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(m!==r.namespaces&&(m=r.namespaces,S=r.enabled(p)),S),set:P=>{d=P}}),typeof r.init=="function"&&r.init(x),x}function s(p,l){let d=r(this.namespace+(typeof l>"u"?":":l)+p);return d.log=this.log,d}function n(p){r.save(p),r.namespaces=p,r.names=[],r.skips=[];let l,d=(typeof p=="string"?p:"").split(/[\s,]+/),m=d.length;for(l=0;l<m;l++)d[l]&&(p=d[l].replace(/\*/g,".*?"),p[0]==="-"?r.skips.push(new RegExp("^"+p.slice(1)+"$")):r.names.push(new RegExp("^"+p+"$")))}function i(){let p=[...r.names.map(o),...r.skips.map(o).map(l=>"-"+l)].join(",");return r.enable(""),p}function u(p){if(p[p.length-1]==="*")return!0;let l,d;for(l=0,d=r.skips.length;l<d;l++)if(r.skips[l].test(p))return!1;for(l=0,d=r.names.length;l<d;l++)if(r.names[l].test(p))return!0;return!1}function o(p){return p.toString().substring(2,p.toString().length-2).replace(/\.\*\?$/,"*")}function f(p){return p instanceof Error?p.stack||p.message:p}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}gr.exports=ta});var wr=A((D,qt)=>{D.formatArgs=ra;D.save=sa;D.load=na;D.useColors=ea;D.storage=ia();D.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();D.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ea(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function ra(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+qt.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,s=0;t[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(s=r))}),t.splice(s,0,e)}D.log=console.debug||console.log||(()=>{});function sa(t){try{t?D.storage.setItem("debug",t):D.storage.removeItem("debug")}catch{}}function na(){let t;try{t=D.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function ia(){try{return localStorage}catch{}}qt.exports=le()(D);var{formatters:aa}=qt.exports;aa.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var br=A((_l,vr)=>{"use strict";vr.exports=(t,e)=>{e=e||process.argv;let r=t.startsWith("-")?"":t.length===1?"-":"--",s=e.indexOf(r+t),n=e.indexOf("--");return s!==-1&&(n===-1?!0:s<n)}});var yr=A((yl,_r)=>{"use strict";var oa=require("os"),z=br(),M=process.env,ft;z("no-color")||z("no-colors")||z("color=false")?ft=!1:(z("color")||z("colors")||z("color=true")||z("color=always"))&&(ft=!0);"FORCE_COLOR"in M&&(ft=M.FORCE_COLOR.length===0||parseInt(M.FORCE_COLOR,10)!==0);function ua(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function ca(t){if(ft===!1)return 0;if(z("color=16m")||z("color=full")||z("color=truecolor"))return 3;if(z("color=256"))return 2;if(t&&!t.isTTY&&ft!==!0)return 0;let e=ft?1:0;if(process.platform==="win32"){let r=oa.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in M)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(r=>r in M)||M.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in M)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(M.TEAMCITY_VERSION)?1:0;if(M.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in M){let r=parseInt((M.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(M.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(M.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(M.TERM)||"COLORTERM"in M?1:(M.TERM==="dumb",e)}function pe(t){let e=ca(t);return ua(e)}_r.exports={supportsColor:pe,stdout:pe(process.stdout),stderr:pe(process.stderr)}});var Tr=A((O,Dt)=>{var la=require("tty"),Lt=require("util");O.init=wa;O.log=da;O.formatArgs=fa;O.save=ma;O.load=ga;O.useColors=pa;O.destroy=Lt.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");O.colors=[6,2,3,4,5,1];try{let t=yr();t&&(t.stderr||t).level>=2&&(O.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}O.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(n,i)=>i.toUpperCase()),s=process.env[e];return/^(yes|on|true|enabled)$/i.test(s)?s=!0:/^(no|off|false|disabled)$/i.test(s)?s=!1:s==="null"?s=null:s=Number(s),t[r]=s,t},{});function pa(){return"colors"in O.inspectOpts?!!O.inspectOpts.colors:la.isatty(process.stderr.fd)}function fa(t){let{namespace:e,useColors:r}=this;if(r){let s=this.color,n="\x1B[3"+(s<8?s:"8;5;"+s),i=`  ${n};1m${e} \x1B[0m`;t[0]=i+t[0].split(`
`).join(`
`+i),t.push(n+"m+"+Dt.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=ha()+e+" "+t[0]}function ha(){return O.inspectOpts.hideDate?"":new Date().toISOString()+" "}function da(...t){return process.stderr.write(Lt.formatWithOptions(O.inspectOpts,...t)+`
`)}function ma(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function ga(){return process.env.DEBUG}function wa(t){t.inspectOpts={};let e=Object.keys(O.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=O.inspectOpts[e[r]]}Dt.exports=le()(O);var{formatters:kr}=Dt.exports;kr.o=function(t){return this.inspectOpts.colors=this.useColors,Lt.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};kr.O=function(t){return this.inspectOpts.colors=this.useColors,Lt.inspect(t,this.inspectOpts)}});var he=A((kl,fe)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?fe.exports=wr():fe.exports=Tr()});var Cr=A(N=>{"use strict";var va=N&&N.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(N,"__esModule",{value:!0});var ba=require("fs"),_a=va(he()),ht=_a.default("@kwsites/file-exists");function ya(t,e,r){ht("checking %s",t);try{let s=ba.statSync(t);return s.isFile()&&e?(ht("[OK] path represents a file"),!0):s.isDirectory()&&r?(ht("[OK] path represents a directory"),!0):(ht("[FAIL] path represents something other than a file or directory"),!1)}catch(s){if(s.code==="ENOENT")return ht("[FAIL] path is not accessible: %o",s),!1;throw ht("[FATAL] %o",s),s}}function ka(t,e=N.READABLE){return ya(t,(e&N.FILE)>0,(e&N.FOLDER)>0)}N.exists=ka;N.FILE=1;N.FOLDER=2;N.READABLE=N.FILE+N.FOLDER});var Er=A(Nt=>{"use strict";function Ta(t){for(var e in t)Nt.hasOwnProperty(e)||(Nt[e]=t[e])}Object.defineProperty(Nt,"__esModule",{value:!0});Ta(Cr())});var me=A(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.createDeferred=et.deferred=void 0;function de(){let t,e,r="pending";return{promise:new Promise((n,i)=>{t=n,e=i}),done(n){r==="pending"&&(r="resolved",t(n))},fail(n){r==="pending"&&(r="rejected",e(n))},get fulfilled(){return r!=="pending"},get status(){return r}}}et.deferred=de;et.createDeferred=de;et.default=de});var ur=A((Rl,vi)=>{"use strict";var Ca=Object.create,Ot=Object.defineProperty,Ea=Object.defineProperties,Ra=Object.getOwnPropertyDescriptor,Oa=Object.getOwnPropertyDescriptors,je=Object.getOwnPropertyNames,Rr=Object.getOwnPropertySymbols,Sa=Object.getPrototypeOf,os=Object.prototype.hasOwnProperty,xa=Object.prototype.propertyIsEnumerable,Or=(t,e,r)=>e in t?Ot(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,G=(t,e)=>{for(var r in e||(e={}))os.call(e,r)&&Or(t,r,e[r]);if(Rr)for(var r of Rr(e))xa.call(e,r)&&Or(t,r,e[r]);return t},yt=(t,e)=>Ea(t,Oa(e)),a=(t,e)=>function(){return t&&(e=(0,t[je(t)[0]])(t=0)),e},Aa=(t,e)=>function(){return e||(0,t[je(t)[0]])((e={exports:{}}).exports,e),e.exports},C=(t,e)=>{for(var r in e)Ot(t,r,{get:e[r],enumerable:!0})},us=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of je(e))!os.call(t,n)&&n!==r&&Ot(t,n,{get:()=>e[n],enumerable:!(s=Ra(e,n))||s.enumerable});return t},Ma=(t,e,r)=>(r=t!=null?Ca(Sa(t)):{},us(e||!t||!t.__esModule?Ot(r,"default",{value:t,enumerable:!0}):r,t)),T=t=>us(Ot({},"__esModule",{value:!0}),t),_t=(t,e,r)=>new Promise((s,n)=>{var i=f=>{try{o(r.next(f))}catch(h){n(h)}},u=f=>{try{o(r.throw(f))}catch(h){n(h)}},o=f=>f.done?s(f.value):Promise.resolve(f.value).then(i,u);o((r=r.apply(t,e)).next())}),V,K=a({"src/lib/errors/git-error.ts"(){"use strict";V=class extends Error{constructor(t,e){super(e),this.task=t,Object.setPrototypeOf(this,new.target.prototype)}}}}),nt,gt=a({"src/lib/errors/git-response-error.ts"(){"use strict";K(),nt=class extends V{constructor(t,e){super(void 0,e||String(t)),this.git=t}}}});function cs(...t){let e=new String(t);return Kt.set(e,t),e}function Vt(t){return t instanceof String&&Kt.has(t)}function Sr(t){return Kt.get(t)||[]}var Kt,St=a({"src/lib/args/pathspec.ts"(){"use strict";Kt=new WeakMap}}),qe,Ia=a({"src/lib/errors/git-construct-error.ts"(){"use strict";K(),qe=class extends V{constructor(t,e){super(void 0,e),this.config=t}}}}),H,xt=a({"src/lib/errors/git-plugin-error.ts"(){"use strict";K(),H=class extends V{constructor(t,e,r){super(t,r),this.task=t,this.plugin=e,Object.setPrototypeOf(this,new.target.prototype)}}}}),Le,ls=a({"src/lib/errors/task-configuration-error.ts"(){"use strict";K(),Le=class extends V{constructor(t){super(void 0,t)}}}});function ps(t){return typeof t=="function"?t:it}function fs(t){return typeof t=="function"&&t!==it}function hs(t,e){let r=t.indexOf(e);return r<=0?[t,""]:[t.substr(0,r),t.substr(r+1)]}function ds(t,e=0){return ms(t)&&t.length>e?t[e]:void 0}function st(t,e=0){if(ms(t)&&t.length>e)return t[t.length-1-e]}function ms(t){return!!(t&&typeof t.length=="number")}function At(t="",e=!0,r=`
`){return t.split(r).reduce((s,n)=>{let i=e?n.trim():n;return i&&s.push(i),s},[])}function De(t,e){return At(t,!0).map(r=>e(r))}function Ne(t){return(0,Te.exists)(t,Te.FOLDER)}function _(t,e){return Array.isArray(t)?t.includes(e)||t.push(e):t.add(e),e}function gs(t,e){return Array.isArray(t)&&!t.includes(e)&&t.push(e),t}function Zt(t,e){if(Array.isArray(t)){let r=t.indexOf(e);r>=0&&t.splice(r,1)}else t.delete(e);return e}function Y(t){return Array.isArray(t)?t:[t]}function ws(t){return t.replace(/[\s-]+(.)/g,(e,r)=>r.toUpperCase())}function vs(t){return Y(t).map(String)}function k(t,e=0){if(t==null)return e;let r=parseInt(t,10);return isNaN(r)?e:r}function Ct(t,e){let r=[];for(let s=0,n=t.length;s<n;s++)r.push(e,t[s]);return r}function Et(t){return(Array.isArray(t)?Buffer.concat(t):t).toString("utf-8")}function bs(t,e){return Object.assign({},...e.map(r=>r in t?{[r]:t[r]}:{}))}function ye(t=0){return new Promise(e=>setTimeout(e,t))}function ke(t){if(t!==!1)return t}var Te,mt,it,Mt,te=a({"src/lib/utils/util.ts"(){"use strict";Te=Er(),mt="\0",it=()=>{},Mt=Object.prototype.toString.call.bind(Object.prototype.toString)}});function J(t,e,r){return e(t)?t:arguments.length>2?r:void 0}function $e(t,e){let r=Vt(t)?"string":typeof t;return/number|string|boolean/.test(r)&&(!e||!e.includes(r))}function Ge(t){return!!t&&Mt(t)==="[object Object]"}function _s(t){return typeof t=="function"}var It,I,ys,Yt,Ue,ks=a({"src/lib/utils/argument-filters.ts"(){"use strict";te(),St(),It=t=>Array.isArray(t),I=t=>typeof t=="string",ys=t=>Array.isArray(t)&&t.every(I),Yt=t=>I(t)||Array.isArray(t)&&t.every(I),Ue=t=>t==null||"number|boolean|function".includes(typeof t)?!1:Array.isArray(t)||typeof t=="string"||typeof t.length=="number"}}),Ce,Pa=a({"src/lib/utils/exit-codes.ts"(){"use strict";Ce=(t=>(t[t.SUCCESS=0]="SUCCESS",t[t.ERROR=1]="ERROR",t[t.NOT_FOUND=-2]="NOT_FOUND",t[t.UNCLEAN=128]="UNCLEAN",t))(Ce||{})}}),Rt,Fa=a({"src/lib/utils/git-output-streams.ts"(){"use strict";Rt=class{constructor(t,e){this.stdOut=t,this.stdErr=e}asStrings(){return new Rt(this.stdOut.toString("utf8"),this.stdErr.toString("utf8"))}}}}),b,X,Ba=a({"src/lib/utils/line-parser.ts"(){"use strict";b=class{constructor(t,e){this.matches=[],this.parse=(r,s)=>(this.resetMatches(),this._regExp.every((n,i)=>this.addMatch(n,i,r(i)))?this.useMatches(s,this.prepareMatches())!==!1:!1),this._regExp=Array.isArray(t)?t:[t],e&&(this.useMatches=e)}useMatches(t,e){throw new Error("LineParser:useMatches not implemented")}resetMatches(){this.matches.length=0}prepareMatches(){return this.matches}addMatch(t,e,r){let s=r&&t.exec(r);return s&&this.pushMatch(e,s),!!s}pushMatch(t,e){this.matches.push(...e.slice(1))}},X=class extends b{addMatch(t,e,r){return/^remote:\s/.test(String(r))&&super.addMatch(t,e,r)}pushMatch(t,e){(t>0||e.length>1)&&super.pushMatch(t,e)}}}});function Ts(...t){let e=process.cwd(),r=Object.assign(G({baseDir:e},Cs),...t.filter(s=>typeof s=="object"&&s));return r.baseDir=r.baseDir||e,r.trimmed=r.trimmed===!0,r}var Cs,ja=a({"src/lib/utils/simple-git-options.ts"(){"use strict";Cs={binary:"git",maxConcurrentProcesses:5,config:[],trimmed:!1}}});function ze(t,e=[]){return Ge(t)?Object.keys(t).reduce((r,s)=>{let n=t[s];return Vt(n)?r.push(n):$e(n,["boolean"])?r.push(s+"="+n):r.push(s),r},e):e}function j(t,e=0,r=!1){let s=[];for(let n=0,i=e<0?t.length:e;n<i;n++)"string|number".includes(typeof t[n])&&s.push(String(t[n]));return ze(He(t),s),r||s.push(...qa(t)),s}function qa(t){let e=typeof st(t)=="function";return J(st(t,e?1:0),It,[])}function He(t){let e=_s(st(t));return J(st(t,e?1:0),Ge)}function E(t,e=!0){let r=ps(st(t));return e||fs(r)?r:void 0}var La=a({"src/lib/utils/task-options.ts"(){"use strict";ks(),te(),St()}});function Ee(t,e){return t(e.stdOut,e.stdErr)}function L(t,e,r,s=!0){return Y(r).forEach(n=>{for(let i=At(n,s),u=0,o=i.length;u<o;u++){let f=(h=0)=>{if(!(u+h>=o))return i[u+h]};e.some(({parse:h})=>h(f,t))}}),t}var Da=a({"src/lib/utils/task-parser.ts"(){"use strict";te()}}),Es={};C(Es,{ExitCodes:()=>Ce,GitOutputStreams:()=>Rt,LineParser:()=>b,NOOP:()=>it,NULL:()=>mt,RemoteLineParser:()=>X,append:()=>_,appendTaskOptions:()=>ze,asArray:()=>Y,asCamelCase:()=>ws,asFunction:()=>ps,asNumber:()=>k,asStringArray:()=>vs,bufferToString:()=>Et,callTaskParser:()=>Ee,createInstanceConfig:()=>Ts,delay:()=>ye,filterArray:()=>It,filterFunction:()=>_s,filterHasLength:()=>Ue,filterPlainObject:()=>Ge,filterPrimitives:()=>$e,filterString:()=>I,filterStringArray:()=>ys,filterStringOrStringArray:()=>Yt,filterType:()=>J,first:()=>ds,folderExists:()=>Ne,forEachLineWithContent:()=>De,getTrailingOptions:()=>j,including:()=>gs,isUserFunction:()=>fs,last:()=>st,objectToString:()=>Mt,orVoid:()=>ke,parseStringResponse:()=>L,pick:()=>bs,prefixedArray:()=>Ct,remove:()=>Zt,splitOn:()=>hs,toLinesWithContent:()=>At,trailingFunctionArgument:()=>E,trailingOptionsArgument:()=>He});var v=a({"src/lib/utils/index.ts"(){"use strict";ks(),Pa(),Fa(),Ba(),ja(),La(),Da(),te()}}),Rs={};C(Rs,{CheckRepoActions:()=>Jt,checkIsBareRepoTask:()=>Ss,checkIsRepoRootTask:()=>Os,checkIsRepoTask:()=>Na});function Na(t){switch(t){case"bare":return Ss();case"root":return Os()}return{commands:["rev-parse","--is-inside-work-tree"],format:"utf-8",onError:ee,parser:We}}function Os(){return{commands:["rev-parse","--git-dir"],format:"utf-8",onError:ee,parser(e){return/^\.(git)?$/.test(e.trim())}}}function Ss(){return{commands:["rev-parse","--is-bare-repository"],format:"utf-8",onError:ee,parser:We}}function $a(t){return/(Not a git repository|Kein Git-Repository)/i.test(String(t))}var Jt,ee,We,xs=a({"src/lib/tasks/check-is-repo.ts"(){"use strict";v(),Jt=(t=>(t.BARE="bare",t.IN_TREE="tree",t.IS_REPO_ROOT="root",t))(Jt||{}),ee=({exitCode:t},e,r,s)=>{if(t===128&&$a(e))return r(Buffer.from("false"));s(e)},We=t=>t.trim()==="true"}});function Ga(t,e){let r=new As(t),s=t?Is:Ms;return At(e).forEach(n=>{let i=n.replace(s,"");r.paths.push(i),(Ps.test(i)?r.folders:r.files).push(i)}),r}var As,Ms,Is,Ps,Ua=a({"src/lib/responses/CleanSummary.ts"(){"use strict";v(),As=class{constructor(t){this.dryRun=t,this.paths=[],this.files=[],this.folders=[]}},Ms=/^[a-z]+\s*/i,Is=/^[a-z]+\s+[a-z]+\s*/i,Ps=/\/$/}}),Re={};C(Re,{EMPTY_COMMANDS:()=>re,adhocExecTask:()=>Fs,configurationErrorTask:()=>q,isBufferTask:()=>js,isEmptyTask:()=>qs,straightThroughBufferTask:()=>Bs,straightThroughStringTask:()=>B});function Fs(t){return{commands:re,format:"empty",parser:t}}function q(t){return{commands:re,format:"empty",parser(){throw typeof t=="string"?new Le(t):t}}}function B(t,e=!1){return{commands:t,format:"utf-8",parser(r){return e?String(r).trim():r}}}function Bs(t){return{commands:t,format:"buffer",parser(e){return e}}}function js(t){return t.format==="buffer"}function qs(t){return t.format==="empty"||!t.commands.length}var re,R=a({"src/lib/tasks/task.ts"(){"use strict";ls(),re=[]}}),Ls={};C(Ls,{CONFIG_ERROR_INTERACTIVE_MODE:()=>Ve,CONFIG_ERROR_MODE_REQUIRED:()=>Ye,CONFIG_ERROR_UNKNOWN_OPTION:()=>Je,CleanOptions:()=>kt,cleanTask:()=>Ds,cleanWithOptionsTask:()=>za,isCleanOptionsArray:()=>Ha});function za(t,e){let{cleanMode:r,options:s,valid:n}=Wa(t);return r?n.options?(s.push(...e),s.some(Ja)?q(Ve):Ds(r,s)):q(Je+JSON.stringify(t)):q(Ye)}function Ds(t,e){return{commands:["clean",`-${t}`,...e],format:"utf-8",parser(s){return Ga(t==="n",s)}}}function Ha(t){return Array.isArray(t)&&t.every(e=>Qe.has(e))}function Wa(t){let e,r=[],s={cleanMode:!1,options:!0};return t.replace(/[^a-z]i/g,"").split("").forEach(n=>{Va(n)?(e=n,s.cleanMode=!0):s.options=s.options&&Ya(r[r.length]=`-${n}`)}),{cleanMode:e,options:r,valid:s}}function Va(t){return t==="f"||t==="n"}function Ya(t){return/^-[a-z]$/i.test(t)&&Qe.has(t.charAt(1))}function Ja(t){return/^-[^\-]/.test(t)?t.indexOf("i")>0:t==="--interactive"}var Ve,Ye,Je,kt,Qe,Ns=a({"src/lib/tasks/clean.ts"(){"use strict";Ua(),v(),R(),Ve="Git clean interactive mode is not supported",Ye='Git clean mode parameter ("n" or "f") is required',Je="Git clean unknown option found in: ",kt=(t=>(t.DRY_RUN="n",t.FORCE="f",t.IGNORED_INCLUDED="x",t.IGNORED_ONLY="X",t.EXCLUDING="e",t.QUIET="q",t.RECURSIVE="d",t))(kt||{}),Qe=new Set(["i",...vs(Object.values(kt))])}});function Qa(t){let e=new Gs;for(let r of $s(t))e.addValue(r.file,String(r.key),r.value);return e}function Xa(t,e){let r=null,s=[],n=new Map;for(let i of $s(t,e))i.key===e&&(s.push(r=i.value),n.has(i.file)||n.set(i.file,[]),n.get(i.file).push(r));return{key:e,paths:Array.from(n.keys()),scopes:n,value:r,values:s}}function Ka(t){return t.replace(/^(file):/,"")}function*$s(t,e=null){let r=t.split("\0");for(let s=0,n=r.length-1;s<n;){let i=Ka(r[s++]),u=r[s++],o=e;if(u.includes(`
`)){let f=hs(u,`
`);o=f[0],u=f[1]}yield{file:i,key:o,value:u}}}var Gs,Za=a({"src/lib/responses/ConfigList.ts"(){"use strict";v(),Gs=class{constructor(){this.files=[],this.values=Object.create(null)}get all(){return this._all||(this._all=this.files.reduce((t,e)=>Object.assign(t,this.values[e]),{})),this._all}addFile(t){if(!(t in this.values)){let e=st(this.files);this.values[t]=e?Object.create(this.values[e]):{},this.files.push(t)}return this.values[t]}addValue(t,e,r){let s=this.addFile(t);s.hasOwnProperty(e)?Array.isArray(s[e])?s[e].push(r):s[e]=[s[e],r]:s[e]=r,this._all=void 0}}}});function ge(t,e){return typeof t=="string"&&Qt.hasOwnProperty(t)?t:e}function to(t,e,r,s){let n=["config",`--${s}`];return r&&n.push("--add"),n.push(t,e),{commands:n,format:"utf-8",parser(i){return i}}}function eo(t,e){let r=["config","--null","--show-origin","--get-all",t];return e&&r.splice(1,0,`--${e}`),{commands:r,format:"utf-8",parser(s){return Xa(s,t)}}}function ro(t){let e=["config","--list","--show-origin","--null"];return t&&e.push(`--${t}`),{commands:e,format:"utf-8",parser(r){return Qa(r)}}}function so(){return{addConfig(t,e,...r){return this._runTask(to(t,e,r[0]===!0,ge(r[1],"local")),E(arguments))},getConfig(t,e){return this._runTask(eo(t,ge(e,void 0)),E(arguments))},listConfig(...t){return this._runTask(ro(ge(t[0],void 0)),E(arguments))}}}var Qt,Us=a({"src/lib/tasks/config.ts"(){"use strict";Za(),v(),Qt=(t=>(t.system="system",t.global="global",t.local="local",t.worktree="worktree",t))(Qt||{})}});function no(t){return zs.has(t)}var Ut,zs,Hs=a({"src/lib/tasks/diff-name-status.ts"(){"use strict";Ut=(t=>(t.ADDED="A",t.COPIED="C",t.DELETED="D",t.MODIFIED="M",t.RENAMED="R",t.CHANGED="T",t.UNMERGED="U",t.UNKNOWN="X",t.BROKEN="B",t))(Ut||{}),zs=new Set(Object.values(Ut))}});function Ws(...t){return new Ys().param(...t)}function io(t){let e=new Set,r={};return De(t,s=>{let[n,i,u]=s.split(mt);e.add(n),(r[n]=r[n]||[]).push({line:k(i),path:n,preview:u})}),{paths:e,results:r}}function ao(){return{grep(t){let e=E(arguments),r=j(arguments);for(let n of Vs)if(r.includes(n))return this._runTask(q(`git.grep: use of "${n}" is not supported.`),e);typeof t=="string"&&(t=Ws().param(t));let s=["grep","--null","-n","--full-name",...r,...t];return this._runTask({commands:s,format:"utf-8",parser(n){return io(n)}},e)}}}var Vs,bt,xr,Ys,Js=a({"src/lib/tasks/grep.ts"(){"use strict";v(),R(),Vs=["-h"],bt=Symbol("grepQuery"),Ys=class{constructor(){this[xr]=[]}*[(xr=bt,Symbol.iterator)](){for(let t of this[bt])yield t}and(...t){return t.length&&this[bt].push("--and","(",...Ct(t,"-e"),")"),this}param(...t){return this[bt].push(...Ct(t,"-e")),this}}}}),Qs={};C(Qs,{ResetMode:()=>Tt,getResetMode:()=>uo,resetTask:()=>oo});function oo(t,e){let r=["reset"];return Xs(t)&&r.push(`--${t}`),r.push(...e),B(r)}function uo(t){if(Xs(t))return t;switch(typeof t){case"string":case"undefined":return"soft"}}function Xs(t){return Ks.includes(t)}var Tt,Ks,Zs=a({"src/lib/tasks/reset.ts"(){"use strict";R(),Tt=(t=>(t.MIXED="mixed",t.SOFT="soft",t.HARD="hard",t.MERGE="merge",t.KEEP="keep",t))(Tt||{}),Ks=Array.from(Object.values(Tt))}}),tn={};C(tn,{CheckRepoActions:()=>Jt,CleanOptions:()=>kt,DiffNameStatus:()=>Ut,GitConfigScope:()=>Qt,GitConstructError:()=>qe,GitError:()=>V,GitPluginError:()=>H,GitResponseError:()=>nt,ResetMode:()=>Tt,TaskConfigurationError:()=>Le,grepQueryBuilder:()=>Ws,pathspec:()=>cs});var co=a({"src/lib/api.ts"(){"use strict";St(),Ia(),K(),xt(),gt(),ls(),xs(),Ns(),Us(),Hs(),Js(),Zs()}});function lo(t){return t?[{type:"spawn.before",action(s,n){t.aborted&&n.kill(new H(void 0,"abort","Abort already signaled"))}},{type:"spawn.after",action(s,n){function i(){n.kill(new H(void 0,"abort","Abort signal received"))}t.addEventListener("abort",i),n.spawned.on("close",()=>t.removeEventListener("abort",i))}}]:void 0}var po=a({"src/lib/plugins/abort-plugin.ts"(){"use strict";xt()}});function fo(t){return typeof t=="string"&&t.trim().toLowerCase()==="-c"}function ho(t,e){if(fo(t)&&/^\s*protocol(.[a-z]+)?.allow/.test(e))throw new H(void 0,"unsafe","Configuring protocol.allow is not permitted without enabling allowUnsafeExtProtocol")}function mo(t,e){if(/^\s*--(upload|receive)-pack/.test(t))throw new H(void 0,"unsafe","Use of --upload-pack or --receive-pack is not permitted without enabling allowUnsafePack");if(e==="clone"&&/^\s*-u\b/.test(t))throw new H(void 0,"unsafe","Use of clone with option -u is not permitted without enabling allowUnsafePack");if(e==="push"&&/^\s*--exec\b/.test(t))throw new H(void 0,"unsafe","Use of push with option --exec is not permitted without enabling allowUnsafePack")}function go({allowUnsafeProtocolOverride:t=!1,allowUnsafePack:e=!1}={}){return{type:"spawn.args",action(r,s){return r.forEach((n,i)=>{let u=i<r.length?r[i+1]:"";t||ho(n,u),e||mo(n,s.method)}),r}}}var wo=a({"src/lib/plugins/block-unsafe-operations-plugin.ts"(){"use strict";xt()}});function vo(t){let e=Ct(t,"-c");return{type:"spawn.args",action(r){return[...e,...r]}}}var bo=a({"src/lib/plugins/command-config-prefixing-plugin.ts"(){"use strict";v()}});function _o({onClose:t=!0,onExit:e=50}={}){function r(){let n=-1,i={close:(0,dt.deferred)(),closeTimeout:(0,dt.deferred)(),exit:(0,dt.deferred)(),exitTimeout:(0,dt.deferred)()},u=Promise.race([t===!1?Oe:i.closeTimeout.promise,e===!1?Oe:i.exitTimeout.promise]);return s(t,i.close,i.closeTimeout),s(e,i.exit,i.exitTimeout),{close(o){n=o,i.close.done()},exit(o){n=o,i.exit.done()},get exitCode(){return n},result:u}}function s(n,i,u){n!==!1&&(n===!0?i.promise:i.promise.then(()=>ye(n))).then(u.done)}return{type:"spawn.after",action(n,i){return _t(this,arguments,function*(u,{spawned:o,close:f}){var h,p;let l=r(),d=!0,m=()=>void(d=!1);(h=o.stdout)==null||h.on("data",m),(p=o.stderr)==null||p.on("data",m),o.on("error",m),o.on("close",S=>l.close(S)),o.on("exit",S=>l.exit(S));try{yield l.result,d&&(yield ye(50)),f(l.exitCode)}catch(S){f(l.exitCode,S)}})}}}var dt,Oe,yo=a({"src/lib/plugins/completion-detection.plugin.ts"(){"use strict";dt=me(),v(),Oe=(0,dt.deferred)().promise}});function ko(t){return!t||!/^([a-z]:)?([a-z0-9/.\\_-]+)$/i.test(t)}function Ar(t,e){if(t.length<1||t.length>2)throw new H(void 0,"binary",en);if(t.some(ko))if(e)console.warn(Se);else throw new H(void 0,"binary",Se);let[s,n]=t;return{binary:s,prefix:n}}function To(t,e=["git"],r=!1){let s=Ar(Y(e),r);t.on("binary",n=>{s=Ar(Y(n),r)}),t.append("spawn.binary",()=>s.binary),t.append("spawn.args",n=>s.prefix?[s.prefix,...n]:n)}var en,Se,Co=a({"src/lib/plugins/custom-binary.plugin.ts"(){"use strict";xt(),v(),en="Invalid value supplied for custom binary, requires a single string or an array containing either one or two strings",Se="Invalid value supplied for custom binary, restricted characters must be removed or supply the unsafe.allowUnsafeCustomBinary option"}});function Eo(t){return!!(t.exitCode&&t.stdErr.length)}function Ro(t){return Buffer.concat([...t.stdOut,...t.stdErr])}function Oo(t=!1,e=Eo,r=Ro){return(s,n)=>!t&&s||!e(n)?s:r(n)}function Mr(t){return{type:"task.error",action(e,r){let s=t(e.error,{stdErr:r.stdErr,stdOut:r.stdOut,exitCode:r.exitCode});return Buffer.isBuffer(s)?{error:new V(void 0,s.toString("utf-8"))}:{error:s}}}}var So=a({"src/lib/plugins/error-detection.plugin.ts"(){"use strict";K()}}),Ir,rn,xo=a({"src/lib/plugins/plugin-store.ts"(){"use strict";Ir=require("node:events"),v(),rn=class{constructor(){this.plugins=new Set,this.events=new Ir.EventEmitter}on(t,e){this.events.on(t,e)}reconfigure(t,e){this.events.emit(t,e)}append(t,e){let r=_(this.plugins,{type:t,action:e});return()=>this.plugins.delete(r)}add(t){let e=[];return Y(t).forEach(r=>r&&this.plugins.add(_(e,r))),()=>{e.forEach(r=>this.plugins.delete(r))}}exec(t,e,r){let s=e,n=Object.freeze(Object.create(r));for(let i of this.plugins)i.type===t&&(s=i.action(s,n));return s}}}});function Ao(t){let e="--progress",r=["checkout","clone","fetch","pull","push"];return[{type:"spawn.args",action(i,u){return r.includes(u.method)?gs(i,e):i}},{type:"spawn.after",action(i,u){var o;u.commands.includes(e)&&((o=u.spawned.stderr)==null||o.on("data",f=>{let h=/^([\s\S]+?):\s*(\d+)% \((\d+)\/(\d+)\)/.exec(f.toString("utf8"));h&&t({method:u.method,stage:Mo(h[1]),progress:k(h[2]),processed:k(h[3]),total:k(h[4])})}))}}]}function Mo(t){return String(t.toLowerCase().split(" ",1))||"unknown"}var Io=a({"src/lib/plugins/progress-monitor-plugin.ts"(){"use strict";v()}}),Po=a({"src/lib/plugins/simple-git-plugin.ts"(){"use strict"}});function Fo(t){let e=bs(t,["uid","gid"]);return{type:"spawn.options",action(r){return G(G({},e),r)}}}var Bo=a({"src/lib/plugins/spawn-options-plugin.ts"(){"use strict";v()}});function jo({block:t,stdErr:e=!0,stdOut:r=!0}){if(t>0)return{type:"spawn.after",action(s,n){var i,u;let o;function f(){o&&clearTimeout(o),o=setTimeout(p,t)}function h(){var l,d;(l=n.spawned.stdout)==null||l.off("data",f),(d=n.spawned.stderr)==null||d.off("data",f),n.spawned.off("exit",h),n.spawned.off("close",h),o&&clearTimeout(o)}function p(){h(),n.kill(new H(void 0,"timeout","block timeout reached"))}r&&((i=n.spawned.stdout)==null||i.on("data",f)),e&&((u=n.spawned.stderr)==null||u.on("data",f)),n.spawned.on("exit",h),n.spawned.on("close",h),f()}}}var qo=a({"src/lib/plugins/timout-plugin.ts"(){"use strict";xt()}}),Lo=a({"src/lib/plugins/index.ts"(){"use strict";po(),wo(),bo(),yo(),Co(),So(),xo(),Io(),Po(),Bo(),qo()}});function Do(){return{type:"spawn.args",action(t){let e=[],r;function s(n){(r=r||[]).push(...n)}for(let n=0;n<t.length;n++){let i=t[n];if(Vt(i)){s(Sr(i));continue}if(i==="--"){s(t.slice(n+1).flatMap(u=>Vt(u)&&Sr(u)||u));break}e.push(i)}return r?[...e,"--",...r.map(String)]:e}}}var No=a({"src/lib/plugins/suffix-paths.plugin.ts"(){"use strict";St()}});function $o(){return(0,zt.default)("simple-git")}function Pr(t,e,r){return!e||!String(e).replace(/\s*/,"")?r?(s,...n)=>{t(s,...n),r(s,...n)}:t:(s,...n)=>{t(`%s ${s}`,e,...n),r&&r(s,...n)}}function Go(t,e,{namespace:r}){if(typeof t=="string")return t;let s=e&&e.namespace||"";return s.startsWith(r)?s.substr(r.length+1):s||r}function Xe(t,e,r,s=$o()){let n=t&&`[${t}]`||"",i=[],u=typeof e=="string"?s.extend(e):e,o=Go(J(e,I),u,s);return h(r);function f(p,l){return _(i,Xe(t,o.replace(/^[^:]+/,p),l,s))}function h(p){let l=p&&`[${p}]`||"",d=u&&Pr(u,l)||it,m=Pr(s,`${n} ${l}`,d);return Object.assign(u?d:m,{label:t,sibling:f,info:m,step:h})}}var zt,sn=a({"src/lib/git-logger.ts"(){"use strict";zt=Ma(he()),v(),zt.default.formatters.L=t=>String(Ue(t)?t.length:"-"),zt.default.formatters.B=t=>Buffer.isBuffer(t)?t.toString("utf8"):Mt(t)}}),$t,xe,Uo=a({"src/lib/runners/tasks-pending-queue.ts"(){"use strict";K(),sn(),$t=class{constructor(t="GitExecutor"){this.logLabel=t,this._queue=new Map}withProgress(t){return this._queue.get(t)}createProgress(t){let e=$t.getName(t.commands[0]),r=Xe(this.logLabel,e);return{task:t,logger:r,name:e}}push(t){let e=this.createProgress(t);return e.logger("Adding task to the queue, commands = %o",t.commands),this._queue.set(t,e),e}fatal(t){for(let[e,{logger:r}]of Array.from(this._queue.entries()))e===t.task?(r.info("Failed %o",t),r("Fatal exception, any as-yet un-started tasks run through this executor will not be attempted")):r.info("A fatal exception occurred in a previous task, the queue has been purged: %o",t.message),this.complete(e);if(this._queue.size!==0)throw new Error(`Queue size should be zero after fatal: ${this._queue.size}`)}complete(t){this.withProgress(t)&&this._queue.delete(t)}attempt(t){let e=this.withProgress(t);if(!e)throw new V(void 0,"TasksPendingQueue: attempt called for an unknown task");return e.logger("Starting task"),e}static getName(t="empty"){return`task:${t}:${++$t.counter}`}},xe=$t,xe.counter=0}});function rt(t,e){return{method:ds(t.commands)||"",commands:e}}function zo(t,e){return r=>{e("[ERROR] child process exception %o",r),t.push(Buffer.from(String(r.stack),"ascii"))}}function Fr(t,e,r,s){return n=>{r("%s received %L bytes",e,n),s("%B",n),t.push(n)}}var Br,Ae,Ho=a({"src/lib/runners/git-executor-chain.ts"(){"use strict";Br=require("child_process"),K(),R(),v(),Uo(),Ae=class{constructor(t,e,r){this._executor=t,this._scheduler=e,this._plugins=r,this._chain=Promise.resolve(),this._queue=new xe}get cwd(){return this._cwd||this._executor.cwd}set cwd(t){this._cwd=t}get env(){return this._executor.env}get outputHandler(){return this._executor.outputHandler}chain(){return this}push(t){return this._queue.push(t),this._chain=this._chain.then(()=>this.attemptTask(t))}attemptTask(t){return _t(this,null,function*(){let e=yield this._scheduler.next(),r=()=>this._queue.complete(t);try{let{logger:s}=this._queue.attempt(t);return yield qs(t)?this.attemptEmptyTask(t,s):this.attemptRemoteTask(t,s)}catch(s){throw this.onFatalException(t,s)}finally{r(),e()}})}onFatalException(t,e){let r=e instanceof V?Object.assign(e,{task:t}):new V(t,e&&String(e));return this._chain=Promise.resolve(),this._queue.fatal(r),r}attemptRemoteTask(t,e){return _t(this,null,function*(){let r=this._plugins.exec("spawn.binary","",rt(t,t.commands)),s=this._plugins.exec("spawn.args",[...t.commands],rt(t,t.commands)),n=yield this.gitResponse(t,r,s,this.outputHandler,e.step("SPAWN")),i=yield this.handleTaskData(t,s,n,e.step("HANDLE"));return e("passing response to task's parser as a %s",t.format),js(t)?Ee(t.parser,i):Ee(t.parser,i.asStrings())})}attemptEmptyTask(t,e){return _t(this,null,function*(){return e("empty task bypassing child process to call to task's parser"),t.parser(this)})}handleTaskData(t,e,r,s){let{exitCode:n,rejection:i,stdOut:u,stdErr:o}=r;return new Promise((f,h)=>{s("Preparing to handle process response exitCode=%d stdOut=",n);let{error:p}=this._plugins.exec("task.error",{error:i},G(G({},rt(t,e)),r));if(p&&t.onError)return s.info("exitCode=%s handling with custom error handler"),t.onError(r,p,l=>{s.info("custom error handler treated as success"),s("custom error returned a %s",Mt(l)),f(new Rt(Array.isArray(l)?Buffer.concat(l):l,Buffer.concat(o)))},h);if(p)return s.info("handling as error: exitCode=%s stdErr=%s rejection=%o",n,o.length,i),h(p);s.info("retrieving task output complete"),f(new Rt(Buffer.concat(u),Buffer.concat(o)))})}gitResponse(t,e,r,s,n){return _t(this,null,function*(){let i=n.sibling("output"),u=this._plugins.exec("spawn.options",{cwd:this.cwd,env:this.env,windowsHide:!0},rt(t,t.commands));return new Promise(o=>{let f=[],h=[];n.info("%s %o",e,r),n("%O",u);let p=this._beforeSpawn(t,r);if(p)return o({stdOut:f,stdErr:h,exitCode:9901,rejection:p});this._plugins.exec("spawn.before",void 0,yt(G({},rt(t,r)),{kill(d){p=d||p}}));let l=(0,Br.spawn)(e,r,u);l.stdout.on("data",Fr(f,"stdOut",n,i.step("stdOut"))),l.stderr.on("data",Fr(h,"stdErr",n,i.step("stdErr"))),l.on("error",zo(h,n)),s&&(n("Passing child process stdOut/stdErr to custom outputHandler"),s(e,l.stdout,l.stderr,[...r])),this._plugins.exec("spawn.after",void 0,yt(G({},rt(t,r)),{spawned:l,close(d,m){o({stdOut:f,stdErr:h,exitCode:d,rejection:p||m})},kill(d){l.killed||(p=d,l.kill("SIGINT"))}}))})})}_beforeSpawn(t,e){let r;return this._plugins.exec("spawn.before",void 0,yt(G({},rt(t,e)),{kill(s){r=s||r}})),r}}}}),nn={};C(nn,{GitExecutor:()=>an});var an,Wo=a({"src/lib/runners/git-executor.ts"(){"use strict";Ho(),an=class{constructor(t,e,r){this.cwd=t,this._scheduler=e,this._plugins=r,this._chain=new Ae(this,this._scheduler,this._plugins)}chain(){return new Ae(this,this._scheduler,this._plugins)}push(t){return this._chain.push(t)}}}});function Vo(t,e,r=it){let s=i=>{r(null,i)},n=i=>{i?.task===t&&r(i instanceof nt?Yo(i):i,void 0)};e.then(s,n)}function Yo(t){let e=s=>{console.warn(`simple-git deprecation notice: accessing GitResponseError.${s} should be GitResponseError.git.${s}, this will no longer be available in version 3`),e=it};return Object.create(t,Object.getOwnPropertyNames(t.git).reduce(r,{}));function r(s,n){return n in t||(s[n]={enumerable:!1,configurable:!1,get(){return e(n),t.git[n]}}),s}}var Jo=a({"src/lib/task-callback.ts"(){"use strict";gt(),v()}});function jr(t,e){return Fs(r=>{if(!Ne(t))throw new Error(`Git.cwd: cannot change to non-directory "${t}"`);return(e||r).cwd=t})}var Qo=a({"src/lib/tasks/change-working-directory.ts"(){"use strict";v(),R()}});function we(t){let e=["checkout",...t];return e[1]==="-b"&&e.includes("-B")&&(e[1]=Zt(e,"-B")),B(e)}function Xo(){return{checkout(){return this._runTask(we(j(arguments,1)),E(arguments))},checkoutBranch(t,e){return this._runTask(we(["-b",t,e,...j(arguments)]),E(arguments))},checkoutLocalBranch(t){return this._runTask(we(["-b",t,...j(arguments)]),E(arguments))}}}var Ko=a({"src/lib/tasks/checkout.ts"(){"use strict";v(),R()}});function Zo(){return{count:0,garbage:0,inPack:0,packs:0,prunePackable:0,size:0,sizeGarbage:0,sizePack:0}}function tu(){return{countObjects(){return this._runTask({commands:["count-objects","--verbose"],format:"utf-8",parser(t){return L(Zo(),[on],t)}})}}}var on,eu=a({"src/lib/tasks/count-objects.ts"(){"use strict";v(),on=new b(/([a-z-]+): (\d+)$/,(t,[e,r])=>{let s=ws(e);t.hasOwnProperty(s)&&(t[s]=k(r))})}});function ru(t){return L({author:null,branch:"",commit:"",root:!1,summary:{changes:0,insertions:0,deletions:0}},un,t)}var un,su=a({"src/lib/parsers/parse-commit.ts"(){"use strict";v(),un=[new b(/^\[([^\s]+)( \([^)]+\))? ([^\]]+)/,(t,[e,r,s])=>{t.branch=e,t.commit=s,t.root=!!r}),new b(/\s*Author:\s(.+)/i,(t,[e])=>{let r=e.split("<"),s=r.pop();!s||!s.includes("@")||(t.author={email:s.substr(0,s.length-1),name:r.join("<").trim()})}),new b(/(\d+)[^,]*(?:,\s*(\d+)[^,]*)(?:,\s*(\d+))/g,(t,[e,r,s])=>{t.summary.changes=parseInt(e,10)||0,t.summary.insertions=parseInt(r,10)||0,t.summary.deletions=parseInt(s,10)||0}),new b(/^(\d+)[^,]*(?:,\s*(\d+)[^(]+\(([+-]))?/,(t,[e,r,s])=>{t.summary.changes=parseInt(e,10)||0;let n=parseInt(r,10)||0;s==="-"?t.summary.deletions=n:s==="+"&&(t.summary.insertions=n)})]}});function nu(t,e,r){return{commands:["-c","core.abbrev=40","commit",...Ct(t,"-m"),...e,...r],format:"utf-8",parser:ru}}function iu(){return{commit(e,...r){let s=E(arguments),n=t(e)||nu(Y(e),Y(J(r[0],Yt,[])),[...J(r[1],It,[]),...j(arguments,0,!0)]);return this._runTask(n,s)}};function t(e){return!Yt(e)&&q("git.commit: requires the commit message to be supplied as a string/string[]")}}var au=a({"src/lib/tasks/commit.ts"(){"use strict";su(),v(),R()}});function ou(){return{firstCommit(){return this._runTask(B(["rev-list","--max-parents=0","HEAD"],!0),E(arguments))}}}var uu=a({"src/lib/tasks/first-commit.ts"(){"use strict";v(),R()}});function cu(t,e){let r=["hash-object",t];return e&&r.push("-w"),B(r,!0)}var lu=a({"src/lib/tasks/hash-object.ts"(){"use strict";R()}});function pu(t,e,r){let s=String(r).trim(),n;if(n=cn.exec(s))return new Ht(t,e,!1,n[1]);if(n=ln.exec(s))return new Ht(t,e,!0,n[1]);let i="",u=s.split(" ");for(;u.length;)if(u.shift()==="in"){i=u.join(" ");break}return new Ht(t,e,/^re/i.test(s),i)}var Ht,cn,ln,fu=a({"src/lib/responses/InitSummary.ts"(){"use strict";Ht=class{constructor(t,e,r,s){this.bare=t,this.path=e,this.existing=r,this.gitDir=s}},cn=/^Init.+ repository in (.+)$/,ln=/^Rein.+ in (.+)$/}});function hu(t){return t.includes(Ke)}function du(t=!1,e,r){let s=["init",...r];return t&&!hu(s)&&s.splice(1,0,Ke),{commands:s,format:"utf-8",parser(n){return pu(s.includes("--bare"),e,n)}}}var Ke,mu=a({"src/lib/tasks/init.ts"(){"use strict";fu(),Ke="--bare"}});function Ze(t){for(let e=0;e<t.length;e++){let r=tr.exec(t[e]);if(r)return`--${r[1]}`}return""}function gu(t){return tr.test(t)}var tr,Pt=a({"src/lib/args/log-format.ts"(){"use strict";tr=/^--(stat|numstat|name-only|name-status)(=|$)/}}),pn,wu=a({"src/lib/responses/DiffSummary.ts"(){"use strict";pn=class{constructor(){this.changed=0,this.deletions=0,this.insertions=0,this.files=[]}}}});function fn(t=""){let e=hn[t];return r=>L(new pn,e,r,!1)}var ve,qr,Lr,Dr,hn,dn=a({"src/lib/parsers/parse-diff-summary.ts"(){"use strict";Pt(),wu(),Hs(),v(),ve=[new b(/^(.+)\s+\|\s+(\d+)(\s+[+\-]+)?$/,(t,[e,r,s=""])=>{t.files.push({file:e.trim(),changes:k(r),insertions:s.replace(/[^+]/g,"").length,deletions:s.replace(/[^-]/g,"").length,binary:!1})}),new b(/^(.+) \|\s+Bin ([0-9.]+) -> ([0-9.]+) ([a-z]+)/,(t,[e,r,s])=>{t.files.push({file:e.trim(),before:k(r),after:k(s),binary:!0})}),new b(/(\d+) files? changed\s*((?:, \d+ [^,]+){0,2})/,(t,[e,r])=>{let s=/(\d+) i/.exec(r),n=/(\d+) d/.exec(r);t.changed=k(e),t.insertions=k(s?.[1]),t.deletions=k(n?.[1])})],qr=[new b(/(\d+)\t(\d+)\t(.+)$/,(t,[e,r,s])=>{let n=k(e),i=k(r);t.changed++,t.insertions+=n,t.deletions+=i,t.files.push({file:s,changes:n+i,insertions:n,deletions:i,binary:!1})}),new b(/-\t-\t(.+)$/,(t,[e])=>{t.changed++,t.files.push({file:e,after:0,before:0,binary:!0})})],Lr=[new b(/(.+)$/,(t,[e])=>{t.changed++,t.files.push({file:e,changes:0,insertions:0,deletions:0,binary:!1})})],Dr=[new b(/([ACDMRTUXB])([0-9]{0,3})\t(.[^\t]*)(\t(.[^\t]*))?$/,(t,[e,r,s,n,i])=>{t.changed++,t.files.push({file:i??s,changes:0,insertions:0,deletions:0,binary:!1,status:ke(no(e)&&e),from:ke(!!i&&s!==i&&s),similarity:k(r)})})],hn={"":ve,"--stat":ve,"--numstat":qr,"--name-status":Dr,"--name-only":Lr}}});function vu(t,e){return e.reduce((r,s,n)=>(r[s]=t[n]||"",r),Object.create({diff:null}))}function mn(t=sr,e=gn,r=""){let s=fn(r);return function(n){let i=At(n.trim(),!1,er).map(function(u){let o=u.split(rr),f=vu(o[0].split(t),e);return o.length>1&&o[1].trim()&&(f.diff=s(o[1])),f});return{all:i,latest:i.length&&i[0]||null,total:i.length}}}var er,rr,sr,gn,wn=a({"src/lib/parsers/parse-list-log-summary.ts"(){"use strict";v(),dn(),Pt(),er="\xF2\xF2\xF2\xF2\xF2\xF2 ",rr=" \xF2\xF2",sr=" \xF2 ",gn=["hash","date","message","refs","author_name","author_email"]}}),vn={};C(vn,{diffSummaryTask:()=>bu,validateLogFormatConfig:()=>se});function bu(t){let e=Ze(t),r=["diff"];return e===""&&(e="--stat",r.push("--stat=4096")),r.push(...t),se(r)||{commands:r,format:"utf-8",parser:fn(e)}}function se(t){let e=t.filter(gu);if(e.length>1)return q(`Summary flags are mutually exclusive - pick one of ${e.join(",")}`);if(e.length&&t.includes("-z"))return q(`Summary flag ${e} parsing is not compatible with null termination option '-z'`)}var nr=a({"src/lib/tasks/diff.ts"(){"use strict";Pt(),dn(),R()}});function _u(t,e){let r=[],s=[];return Object.keys(t).forEach(n=>{r.push(n),s.push(String(t[n]))}),[r,s.join(e)]}function yu(t){return Object.keys(t).reduce((e,r)=>(r in Me||(e[r]=t[r]),e),{})}function bn(t={},e=[]){let r=J(t.splitter,I,sr),s=!$e(t.format)&&t.format?t.format:{hash:"%H",date:t.strictDate===!1?"%ai":"%aI",message:"%s",refs:"%D",body:t.multiLine?"%B":"%b",author_name:t.mailMap!==!1?"%aN":"%an",author_email:t.mailMap!==!1?"%aE":"%ae"},[n,i]=_u(s,r),u=[],o=[`--pretty=format:${er}${i}${rr}`,...e],f=t.n||t["max-count"]||t.maxCount;if(f&&o.push(`--max-count=${f}`),t.from||t.to){let h=t.symmetric!==!1?"...":"..";u.push(`${t.from||""}${h}${t.to||""}`)}return I(t.file)&&o.push("--follow",cs(t.file)),ze(yu(t),o),{fields:n,splitter:r,commands:[...o,...u]}}function ku(t,e,r){let s=mn(t,e,Ze(r));return{commands:["log",...r],format:"utf-8",parser:s}}function Tu(){return{log(...r){let s=E(arguments),n=bn(He(arguments),J(arguments[0],It)),i=e(...r)||se(n.commands)||t(n);return this._runTask(i,s)}};function t(r){return ku(r.splitter,r.fields,r.commands)}function e(r,s){return I(r)&&I(s)&&q("git.log(string, string) should be replaced with git.log({ from: string, to: string })")}}var Me,_n=a({"src/lib/tasks/log.ts"(){"use strict";Pt(),St(),wn(),v(),R(),nr(),Me=(t=>(t[t["--pretty"]=0]="--pretty",t[t["max-count"]=1]="max-count",t[t.maxCount=2]="maxCount",t[t.n=3]="n",t[t.file=4]="file",t[t.format=5]="format",t[t.from=6]="from",t[t.to=7]="to",t[t.splitter=8]="splitter",t[t.symmetric=9]="symmetric",t[t.mailMap=10]="mailMap",t[t.multiLine=11]="multiLine",t[t.strictDate=12]="strictDate",t))(Me||{})}}),Wt,yn,Cu=a({"src/lib/responses/MergeSummary.ts"(){"use strict";Wt=class{constructor(t,e=null,r){this.reason=t,this.file=e,this.meta=r}toString(){return`${this.file}:${this.reason}`}},yn=class{constructor(){this.conflicts=[],this.merges=[],this.result="success"}get failed(){return this.conflicts.length>0}get reason(){return this.result}toString(){return this.conflicts.length?`CONFLICTS: ${this.conflicts.join(", ")}`:"OK"}}}}),Ie,kn,Eu=a({"src/lib/responses/PullSummary.ts"(){"use strict";Ie=class{constructor(){this.remoteMessages={all:[]},this.created=[],this.deleted=[],this.files=[],this.deletions={},this.insertions={},this.summary={changes:0,deletions:0,insertions:0}}},kn=class{constructor(){this.remote="",this.hash={local:"",remote:""},this.branch={local:"",remote:""},this.message=""}toString(){return this.message}}}});function be(t){return t.objects=t.objects||{compressing:0,counting:0,enumerating:0,packReused:0,reused:{count:0,delta:0},total:{count:0,delta:0}}}function Nr(t){let e=/^\s*(\d+)/.exec(t),r=/delta (\d+)/i.exec(t);return{count:k(e&&e[1]||"0"),delta:k(r&&r[1]||"0")}}var Tn,Ru=a({"src/lib/parsers/parse-remote-objects.ts"(){"use strict";v(),Tn=[new X(/^remote:\s*(enumerating|counting|compressing) objects: (\d+),/i,(t,[e,r])=>{let s=e.toLowerCase(),n=be(t.remoteMessages);Object.assign(n,{[s]:k(r)})}),new X(/^remote:\s*(enumerating|counting|compressing) objects: \d+% \(\d+\/(\d+)\),/i,(t,[e,r])=>{let s=e.toLowerCase(),n=be(t.remoteMessages);Object.assign(n,{[s]:k(r)})}),new X(/total ([^,]+), reused ([^,]+), pack-reused (\d+)/i,(t,[e,r,s])=>{let n=be(t.remoteMessages);n.total=Nr(e),n.reused=Nr(r),n.packReused=k(s)})]}});function Cn(t,e){return L({remoteMessages:new Rn},En,e)}var En,Rn,On=a({"src/lib/parsers/parse-remote-messages.ts"(){"use strict";v(),Ru(),En=[new X(/^remote:\s*(.+)$/,(t,[e])=>(t.remoteMessages.all.push(e.trim()),!1)),...Tn,new X([/create a (?:pull|merge) request/i,/\s(https?:\/\/\S+)$/],(t,[e])=>{t.remoteMessages.pullRequestUrl=e}),new X([/found (\d+) vulnerabilities.+\(([^)]+)\)/i,/\s(https?:\/\/\S+)$/],(t,[e,r,s])=>{t.remoteMessages.vulnerabilities={count:k(e),summary:r,url:s}})],Rn=class{constructor(){this.all=[]}}}});function Ou(t,e){let r=L(new kn,Sn,[t,e]);return r.message&&r}var $r,Gr,Ur,zr,Sn,Hr,ir,xn=a({"src/lib/parsers/parse-pull.ts"(){"use strict";Eu(),v(),On(),$r=/^\s*(.+?)\s+\|\s+\d+\s*(\+*)(-*)/,Gr=/(\d+)\D+((\d+)\D+\(\+\))?(\D+(\d+)\D+\(-\))?/,Ur=/^(create|delete) mode \d+ (.+)/,zr=[new b($r,(t,[e,r,s])=>{t.files.push(e),r&&(t.insertions[e]=r.length),s&&(t.deletions[e]=s.length)}),new b(Gr,(t,[e,,r,,s])=>r!==void 0||s!==void 0?(t.summary.changes=+e||0,t.summary.insertions=+r||0,t.summary.deletions=+s||0,!0):!1),new b(Ur,(t,[e,r])=>{_(t.files,r),_(e==="create"?t.created:t.deleted,r)})],Sn=[new b(/^from\s(.+)$/i,(t,[e])=>void(t.remote=e)),new b(/^fatal:\s(.+)$/,(t,[e])=>void(t.message=e)),new b(/([a-z0-9]+)\.\.([a-z0-9]+)\s+(\S+)\s+->\s+(\S+)$/,(t,[e,r,s,n])=>{t.branch.local=s,t.hash.local=e,t.branch.remote=n,t.hash.remote=r})],Hr=(t,e)=>L(new Ie,zr,[t,e]),ir=(t,e)=>Object.assign(new Ie,Hr(t,e),Cn(t,e))}}),Wr,An,Vr,Su=a({"src/lib/parsers/parse-merge.ts"(){"use strict";Cu(),v(),xn(),Wr=[new b(/^Auto-merging\s+(.+)$/,(t,[e])=>{t.merges.push(e)}),new b(/^CONFLICT\s+\((.+)\): Merge conflict in (.+)$/,(t,[e,r])=>{t.conflicts.push(new Wt(e,r))}),new b(/^CONFLICT\s+\((.+\/delete)\): (.+) deleted in (.+) and/,(t,[e,r,s])=>{t.conflicts.push(new Wt(e,r,{deleteRef:s}))}),new b(/^CONFLICT\s+\((.+)\):/,(t,[e])=>{t.conflicts.push(new Wt(e,null))}),new b(/^Automatic merge failed;\s+(.+)$/,(t,[e])=>{t.result=e})],An=(t,e)=>Object.assign(Vr(t,e),ir(t,e)),Vr=t=>L(new yn,Wr,t)}});function Yr(t){return t.length?{commands:["merge",...t],format:"utf-8",parser(e,r){let s=An(e,r);if(s.failed)throw new nt(s);return s}}:q("Git.merge requires at least one option")}var xu=a({"src/lib/tasks/merge.ts"(){"use strict";gt(),Su(),R()}});function Au(t,e,r){let s=r.includes("deleted"),n=r.includes("tag")||/^refs\/tags/.test(t),i=!r.includes("new");return{deleted:s,tag:n,branch:!n,new:!i,alreadyUpdated:i,local:t,remote:e}}var Jr,Mn,Qr,Mu=a({"src/lib/parsers/parse-push.ts"(){"use strict";v(),On(),Jr=[new b(/^Pushing to (.+)$/,(t,[e])=>{t.repo=e}),new b(/^updating local tracking ref '(.+)'/,(t,[e])=>{t.ref=yt(G({},t.ref||{}),{local:e})}),new b(/^[=*-]\s+([^:]+):(\S+)\s+\[(.+)]$/,(t,[e,r,s])=>{t.pushed.push(Au(e,r,s))}),new b(/^Branch '([^']+)' set up to track remote branch '([^']+)' from '([^']+)'/,(t,[e,r,s])=>{t.branch=yt(G({},t.branch||{}),{local:e,remote:r,remoteName:s})}),new b(/^([^:]+):(\S+)\s+([a-z0-9]+)\.\.([a-z0-9]+)$/,(t,[e,r,s,n])=>{t.update={head:{local:e,remote:r},hash:{from:s,to:n}}})],Mn=(t,e)=>{let r=Qr(t,e),s=Cn(t,e);return G(G({},r),s)},Qr=(t,e)=>L({pushed:[]},Jr,[t,e])}}),In={};C(In,{pushTagsTask:()=>Iu,pushTask:()=>ar});function Iu(t={},e){return _(e,"--tags"),ar(t,e)}function ar(t={},e){let r=["push",...e];return t.branch&&r.splice(1,0,t.branch),t.remote&&r.splice(1,0,t.remote),Zt(r,"-v"),_(r,"--verbose"),_(r,"--porcelain"),{commands:r,format:"utf-8",parser:Mn}}var Pn=a({"src/lib/tasks/push.ts"(){"use strict";Mu(),v()}});function Pu(){return{showBuffer(){let t=["show",...j(arguments,1)];return t.includes("--binary")||t.splice(1,0,"--binary"),this._runTask(Bs(t),E(arguments))},show(){let t=["show",...j(arguments,1)];return this._runTask(B(t),E(arguments))}}}var Fu=a({"src/lib/tasks/show.ts"(){"use strict";v(),R()}}),Xr,Fn,Bu=a({"src/lib/responses/FileStatusSummary.ts"(){"use strict";Xr=/^(.+)\0(.+)$/,Fn=class{constructor(t,e,r){if(this.path=t,this.index=e,this.working_dir=r,e==="R"||r==="R"){let s=Xr.exec(t)||[null,t,t];this.from=s[2]||"",this.path=s[1]||""}}}}});function Kr(t){let[e,r]=t.split(mt);return{from:r||e,to:e}}function $(t,e,r){return[`${t}${e}`,r]}function _e(t,...e){return e.map(r=>$(t,r,(s,n)=>_(s.conflicted,n)))}function ju(t,e){let r=e.trim();switch(" "){case r.charAt(2):return s(r.charAt(0),r.charAt(1),r.substr(3));case r.charAt(1):return s(" ",r.charAt(0),r.substr(2));default:return}function s(n,i,u){let o=`${n}${i}`,f=Bn.get(o);f&&f(t,u),o!=="##"&&o!=="!!"&&t.files.push(new Fn(u,n,i))}}var Zr,Bn,jn,qu=a({"src/lib/responses/StatusSummary.ts"(){"use strict";v(),Bu(),Zr=class{constructor(){this.not_added=[],this.conflicted=[],this.created=[],this.deleted=[],this.ignored=void 0,this.modified=[],this.renamed=[],this.files=[],this.staged=[],this.ahead=0,this.behind=0,this.current=null,this.tracking=null,this.detached=!1,this.isClean=()=>!this.files.length}},Bn=new Map([$(" ","A",(t,e)=>_(t.created,e)),$(" ","D",(t,e)=>_(t.deleted,e)),$(" ","M",(t,e)=>_(t.modified,e)),$("A"," ",(t,e)=>_(t.created,e)&&_(t.staged,e)),$("A","M",(t,e)=>_(t.created,e)&&_(t.staged,e)&&_(t.modified,e)),$("D"," ",(t,e)=>_(t.deleted,e)&&_(t.staged,e)),$("M"," ",(t,e)=>_(t.modified,e)&&_(t.staged,e)),$("M","M",(t,e)=>_(t.modified,e)&&_(t.staged,e)),$("R"," ",(t,e)=>{_(t.renamed,Kr(e))}),$("R","M",(t,e)=>{let r=Kr(e);_(t.renamed,r),_(t.modified,r.to)}),$("!","!",(t,e)=>{_(t.ignored=t.ignored||[],e)}),$("?","?",(t,e)=>_(t.not_added,e)),..._e("A","A","U"),..._e("D","D","U"),..._e("U","A","D","U"),["##",(t,e)=>{let r=/ahead (\d+)/,s=/behind (\d+)/,n=/^(.+?(?=(?:\.{3}|\s|$)))/,i=/\.{3}(\S*)/,u=/\son\s([\S]+)$/,o;o=r.exec(e),t.ahead=o&&+o[1]||0,o=s.exec(e),t.behind=o&&+o[1]||0,o=n.exec(e),t.current=o&&o[1],o=i.exec(e),t.tracking=o&&o[1],o=u.exec(e),t.current=o&&o[1]||t.current,t.detached=/\(no branch\)/.test(e)}]]),jn=function(t){let e=t.split(mt),r=new Zr;for(let s=0,n=e.length;s<n;){let i=e[s++].trim();i&&(i.charAt(0)==="R"&&(i+=mt+(e[s++]||"")),ju(r,i))}return r}}});function Lu(t){return{format:"utf-8",commands:["status","--porcelain","-b","-u","--null",...t.filter(r=>!qn.includes(r))],parser(r){return jn(r)}}}var qn,Du=a({"src/lib/tasks/status.ts"(){"use strict";qu(),qn=["--null","-z"]}});function Xt(t=0,e=0,r=0,s="",n=!0){return Object.defineProperty({major:t,minor:e,patch:r,agent:s,installed:n},"toString",{value(){return`${this.major}.${this.minor}.${this.patch}`},configurable:!1,enumerable:!1})}function Nu(){return Xt(0,0,0,"",!1)}function $u(){return{version(){return this._runTask({commands:["--version"],format:"utf-8",parser:Gu,onError(t,e,r,s){if(t.exitCode===-2)return r(Buffer.from(or));s(e)}})}}}function Gu(t){return t===or?Nu():L(Xt(0,0,0,t),Ln,t)}var or,Ln,Uu=a({"src/lib/tasks/version.ts"(){"use strict";v(),or="installed=false",Ln=[new b(/version (\d+)\.(\d+)\.(\d+)(?:\s*\((.+)\))?/,(t,[e,r,s,n=""])=>{Object.assign(t,Xt(k(e),k(r),k(s),n))}),new b(/version (\d+)\.(\d+)\.(\D+)(.+)?$/,(t,[e,r,s,n=""])=>{Object.assign(t,Xt(k(e),k(r),s,n))})]}}),Dn={};C(Dn,{SimpleGitApi:()=>Pe});var Pe,zu=a({"src/lib/simple-git-api.ts"(){"use strict";Jo(),Qo(),Ko(),eu(),au(),Us(),uu(),Js(),lu(),mu(),_n(),xu(),Pn(),Fu(),Du(),R(),Uu(),v(),Pe=class{constructor(t){this._executor=t}_runTask(t,e){let r=this._executor.chain(),s=r.push(t);return e&&Vo(t,s,e),Object.create(this,{then:{value:s.then.bind(s)},catch:{value:s.catch.bind(s)},_executor:{value:r}})}add(t){return this._runTask(B(["add",...Y(t)]),E(arguments))}cwd(t){let e=E(arguments);return typeof t=="string"?this._runTask(jr(t,this._executor),e):typeof t?.path=="string"?this._runTask(jr(t.path,t.root&&this._executor||void 0),e):this._runTask(q("Git.cwd: workingDirectory must be supplied as a string"),e)}hashObject(t,e){return this._runTask(cu(t,e===!0),E(arguments))}init(t){return this._runTask(du(t===!0,this._executor.cwd,j(arguments)),E(arguments))}merge(){return this._runTask(Yr(j(arguments)),E(arguments))}mergeFromTo(t,e){return I(t)&&I(e)?this._runTask(Yr([t,e,...j(arguments)]),E(arguments,!1)):this._runTask(q("Git.mergeFromTo requires that the 'remote' and 'branch' arguments are supplied as strings"))}outputHandler(t){return this._executor.outputHandler=t,this}push(){let t=ar({remote:J(arguments[0],I),branch:J(arguments[1],I)},j(arguments));return this._runTask(t,E(arguments))}stash(){return this._runTask(B(["stash",...j(arguments)]),E(arguments))}status(){return this._runTask(Lu(j(arguments)),E(arguments))}},Object.assign(Pe.prototype,Xo(),iu(),so(),tu(),ou(),ao(),Tu(),Pu(),$u())}}),Nn={};C(Nn,{Scheduler:()=>$n});var ts,es,$n,Hu=a({"src/lib/runners/scheduler.ts"(){"use strict";v(),ts=me(),sn(),es=(()=>{let t=0;return()=>{t++;let{promise:e,done:r}=(0,ts.createDeferred)();return{promise:e,done:r,id:t}}})(),$n=class{constructor(t=2){this.concurrency=t,this.logger=Xe("","scheduler"),this.pending=[],this.running=[],this.logger("Constructed, concurrency=%s",t)}schedule(){if(!this.pending.length||this.running.length>=this.concurrency){this.logger("Schedule attempt ignored, pending=%s running=%s concurrency=%s",this.pending.length,this.running.length,this.concurrency);return}let t=_(this.running,this.pending.shift());this.logger("Attempting id=%s",t.id),t.done(()=>{this.logger("Completing id=",t.id),Zt(this.running,t),this.schedule()})}next(){let{promise:t,id:e}=_(this.pending,es());return this.logger("Scheduling id=%s",e),this.schedule(),t}}}}),Gn={};C(Gn,{applyPatchTask:()=>Wu});function Wu(t,e){return B(["apply",...e,...t])}var Vu=a({"src/lib/tasks/apply-patch.ts"(){"use strict";R()}});function Yu(t,e){return{branch:t,hash:e,success:!0}}function Ju(t){return{branch:t,hash:null,success:!1}}var Un,Qu=a({"src/lib/responses/BranchDeleteSummary.ts"(){"use strict";Un=class{constructor(){this.all=[],this.branches={},this.errors=[]}get success(){return!this.errors.length}}}});function zn(t,e){return e===1&&Fe.test(t)}var rs,Fe,ss,ne,Xu=a({"src/lib/parsers/parse-branch-delete.ts"(){"use strict";Qu(),v(),rs=/(\S+)\s+\(\S+\s([^)]+)\)/,Fe=/^error[^']+'([^']+)'/m,ss=[new b(rs,(t,[e,r])=>{let s=Yu(e,r);t.all.push(s),t.branches[e]=s}),new b(Fe,(t,[e])=>{let r=Ju(e);t.errors.push(r),t.all.push(r),t.branches[e]=r})],ne=(t,e)=>L(new Un,ss,[t,e])}}),Hn,Ku=a({"src/lib/responses/BranchSummary.ts"(){"use strict";Hn=class{constructor(){this.all=[],this.branches={},this.current="",this.detached=!1}push(t,e,r,s,n){t==="*"&&(this.detached=e,this.current=r),this.all.push(r),this.branches[r]={current:t==="*",linkedWorkTree:t==="+",name:r,commit:s,label:n}}}}});function ns(t){return t?t.charAt(0):""}function Wn(t){return L(new Hn,Vn,t)}var Vn,Zu=a({"src/lib/parsers/parse-branch.ts"(){"use strict";Ku(),v(),Vn=[new b(/^([*+]\s)?\((?:HEAD )?detached (?:from|at) (\S+)\)\s+([a-z0-9]+)\s(.*)$/,(t,[e,r,s,n])=>{t.push(ns(e),!0,r,s,n)}),new b(new RegExp("^([*+]\\s)?(\\S+)\\s+([a-z0-9]+)\\s?(.*)$","s"),(t,[e,r,s,n])=>{t.push(ns(e),!1,r,s,n)})]}}),Yn={};C(Yn,{branchLocalTask:()=>ec,branchTask:()=>tc,containsDeleteBranchCommand:()=>Jn,deleteBranchTask:()=>sc,deleteBranchesTask:()=>rc});function Jn(t){let e=["-d","-D","--delete"];return t.some(r=>e.includes(r))}function tc(t){let e=Jn(t),r=["branch",...t];return r.length===1&&r.push("-a"),r.includes("-v")||r.splice(1,0,"-v"),{format:"utf-8",commands:r,parser(s,n){return e?ne(s,n).all[0]:Wn(s)}}}function ec(){return{format:"utf-8",commands:["branch","-v"],parser:Wn}}function rc(t,e=!1){return{format:"utf-8",commands:["branch","-v",e?"-D":"-d",...t],parser(r,s){return ne(r,s)},onError({exitCode:r,stdOut:s},n,i,u){if(!zn(String(n),r))return u(n);i(s)}}}function sc(t,e=!1){let r={format:"utf-8",commands:["branch","-v",e?"-D":"-d",t],parser(s,n){return ne(s,n).branches[t]},onError({exitCode:s,stdErr:n,stdOut:i},u,o,f){if(!zn(String(u),s))return f(u);throw new nt(r.parser(Et(i),Et(n)),String(u))}};return r}var nc=a({"src/lib/tasks/branch.ts"(){"use strict";gt(),Xu(),Zu(),v()}}),Qn,ic=a({"src/lib/responses/CheckIgnore.ts"(){"use strict";Qn=t=>t.split(/\n/g).map(e=>e.trim()).filter(e=>!!e)}}),Xn={};C(Xn,{checkIgnoreTask:()=>ac});function ac(t){return{commands:["check-ignore",...t],format:"utf-8",parser:Qn}}var oc=a({"src/lib/tasks/check-ignore.ts"(){"use strict";ic()}}),Kn={};C(Kn,{cloneMirrorTask:()=>cc,cloneTask:()=>Zn});function uc(t){return/^--upload-pack(=|$)/.test(t)}function Zn(t,e,r){let s=["clone",...r];return I(t)&&s.push(t),I(e)&&s.push(e),s.find(uc)?q("git.fetch: potential exploit argument blocked."):B(s)}function cc(t,e,r){return _(r,"--mirror"),Zn(t,e,r)}var lc=a({"src/lib/tasks/clone.ts"(){"use strict";R(),v()}});function pc(t,e){return L({raw:t,remote:null,branches:[],tags:[],updated:[],deleted:[]},ti,[t,e])}var ti,fc=a({"src/lib/parsers/parse-fetch.ts"(){"use strict";v(),ti=[new b(/From (.+)$/,(t,[e])=>{t.remote=e}),new b(/\* \[new branch]\s+(\S+)\s*-> (.+)$/,(t,[e,r])=>{t.branches.push({name:e,tracking:r})}),new b(/\* \[new tag]\s+(\S+)\s*-> (.+)$/,(t,[e,r])=>{t.tags.push({name:e,tracking:r})}),new b(/- \[deleted]\s+\S+\s*-> (.+)$/,(t,[e])=>{t.deleted.push({tracking:e})}),new b(/\s*([^.]+)\.\.(\S+)\s+(\S+)\s*-> (.+)$/,(t,[e,r,s,n])=>{t.updated.push({name:s,tracking:n,to:r,from:e})})]}}),ei={};C(ei,{fetchTask:()=>dc});function hc(t){return/^--upload-pack(=|$)/.test(t)}function dc(t,e,r){let s=["fetch",...r];return t&&e&&s.push(t,e),s.find(hc)?q("git.fetch: potential exploit argument blocked."):{commands:s,format:"utf-8",parser:pc}}var mc=a({"src/lib/tasks/fetch.ts"(){"use strict";fc(),R()}});function gc(t){return L({moves:[]},ri,t)}var ri,wc=a({"src/lib/parsers/parse-move.ts"(){"use strict";v(),ri=[new b(/^Renaming (.+) to (.+)$/,(t,[e,r])=>{t.moves.push({from:e,to:r})})]}}),si={};C(si,{moveTask:()=>vc});function vc(t,e){return{commands:["mv","-v",...Y(t),e],format:"utf-8",parser:gc}}var bc=a({"src/lib/tasks/move.ts"(){"use strict";wc(),v()}}),ni={};C(ni,{pullTask:()=>_c});function _c(t,e,r){let s=["pull",...r];return t&&e&&s.splice(1,0,t,e),{commands:s,format:"utf-8",parser(n,i){return ir(n,i)},onError(n,i,u,o){let f=Ou(Et(n.stdOut),Et(n.stdErr));if(f)return o(new nt(f));o(i)}}}var yc=a({"src/lib/tasks/pull.ts"(){"use strict";gt(),xn(),v()}});function kc(t){let e={};return ii(t,([r])=>e[r]={name:r}),Object.values(e)}function Tc(t){let e={};return ii(t,([r,s,n])=>{e.hasOwnProperty(r)||(e[r]={name:r,refs:{fetch:"",push:""}}),n&&s&&(e[r].refs[n.replace(/[^a-z]/g,"")]=s)}),Object.values(e)}function ii(t,e){De(t,r=>e(r.split(/\s+/)))}var Cc=a({"src/lib/responses/GetRemoteSummary.ts"(){"use strict";v()}}),ai={};C(ai,{addRemoteTask:()=>Ec,getRemotesTask:()=>Rc,listRemotesTask:()=>Oc,remoteTask:()=>Sc,removeRemoteTask:()=>xc});function Ec(t,e,r){return B(["remote","add",...r,t,e])}function Rc(t){let e=["remote"];return t&&e.push("-v"),{commands:e,format:"utf-8",parser:t?Tc:kc}}function Oc(t){let e=[...t];return e[0]!=="ls-remote"&&e.unshift("ls-remote"),B(e)}function Sc(t){let e=[...t];return e[0]!=="remote"&&e.unshift("remote"),B(e)}function xc(t){return B(["remote","remove",t])}var Ac=a({"src/lib/tasks/remote.ts"(){"use strict";Cc(),R()}}),oi={};C(oi,{stashListTask:()=>Mc});function Mc(t={},e){let r=bn(t),s=["stash","list",...r.commands,...e],n=mn(r.splitter,r.fields,Ze(s));return se(s)||{commands:s,format:"utf-8",parser:n}}var Ic=a({"src/lib/tasks/stash-list.ts"(){"use strict";Pt(),wn(),nr(),_n()}}),ui={};C(ui,{addSubModuleTask:()=>Pc,initSubModuleTask:()=>Fc,subModuleTask:()=>ie,updateSubModuleTask:()=>Bc});function Pc(t,e){return ie(["add",t,e])}function Fc(t){return ie(["init",...t])}function ie(t){let e=[...t];return e[0]!=="submodule"&&e.unshift("submodule"),B(e)}function Bc(t){return ie(["update",...t])}var jc=a({"src/lib/tasks/sub-module.ts"(){"use strict";R()}});function qc(t,e){let r=isNaN(t),s=isNaN(e);return r!==s?r?1:-1:r?ci(t,e):0}function ci(t,e){return t===e?0:t>e?1:-1}function Lc(t){return t.trim()}function Gt(t){return typeof t=="string"&&parseInt(t.replace(/^\D+/g,""),10)||0}var is,li,Dc=a({"src/lib/responses/TagList.ts"(){"use strict";is=class{constructor(t,e){this.all=t,this.latest=e}},li=function(t,e=!1){let r=t.split(`
`).map(Lc).filter(Boolean);e||r.sort(function(n,i){let u=n.split("."),o=i.split(".");if(u.length===1||o.length===1)return qc(Gt(u[0]),Gt(o[0]));for(let f=0,h=Math.max(u.length,o.length);f<h;f++){let p=ci(Gt(u[f]),Gt(o[f]));if(p)return p}return 0});let s=e?r[0]:[...r].reverse().find(n=>n.indexOf(".")>=0);return new is(r,s)}}}),pi={};C(pi,{addAnnotatedTagTask:()=>Gc,addTagTask:()=>$c,tagListTask:()=>Nc});function Nc(t=[]){let e=t.some(r=>/^--sort=/.test(r));return{format:"utf-8",commands:["tag","-l",...t],parser(r){return li(r,e)}}}function $c(t){return{format:"utf-8",commands:["tag",t],parser(){return{name:t}}}}function Gc(t,e){return{format:"utf-8",commands:["tag","-a","-m",e,t],parser(){return{name:t}}}}var Uc=a({"src/lib/tasks/tag.ts"(){"use strict";Dc()}}),zc=Aa({"src/git.js"(t,e){"use strict";var{GitExecutor:r}=(Wo(),T(nn)),{SimpleGitApi:s}=(zu(),T(Dn)),{Scheduler:n}=(Hu(),T(Nn)),{configurationErrorTask:i}=(R(),T(Re)),{asArray:u,filterArray:o,filterPrimitives:f,filterString:h,filterStringOrStringArray:p,filterType:l,getTrailingOptions:d,trailingFunctionArgument:m,trailingOptionsArgument:S}=(v(),T(Es)),{applyPatchTask:x}=(Vu(),T(Gn)),{branchTask:P,branchLocalTask:Q,deleteBranchesTask:at,deleteBranchTask:ae}=(nc(),T(Yn)),{checkIgnoreTask:ot}=(oc(),T(Xn)),{checkIsRepoTask:lr}=(xs(),T(Rs)),{cloneTask:vt,cloneMirrorTask:oe}=(lc(),T(Kn)),{cleanWithOptionsTask:Bt,isCleanOptionsArray:ue}=(Ns(),T(Ls)),{diffSummaryTask:Ri}=(nr(),T(vn)),{fetchTask:Oi}=(mc(),T(ei)),{moveTask:Si}=(bc(),T(si)),{pullTask:xi}=(yc(),T(ni)),{pushTagsTask:Ai}=(Pn(),T(In)),{addRemoteTask:Mi,getRemotesTask:Ii,listRemotesTask:Pi,remoteTask:Fi,removeRemoteTask:Bi}=(Ac(),T(ai)),{getResetMode:ji,resetTask:qi}=(Zs(),T(Qs)),{stashListTask:Li}=(Ic(),T(oi)),{addSubModuleTask:Di,initSubModuleTask:Ni,subModuleTask:$i,updateSubModuleTask:Gi}=(jc(),T(ui)),{addAnnotatedTagTask:Ui,addTagTask:zi,tagListTask:Hi}=(Uc(),T(pi)),{straightThroughBufferTask:Wi,straightThroughStringTask:W}=(R(),T(Re));function w(c,g){this._plugins=g,this._executor=new r(c.baseDir,new n(c.maxConcurrentProcesses),g),this._trimmed=c.trimmed}(w.prototype=Object.create(s.prototype)).constructor=w,w.prototype.customBinary=function(c){return this._plugins.reconfigure("binary",c),this},w.prototype.env=function(c,g){return arguments.length===1&&typeof c=="object"?this._executor.env=c:(this._executor.env=this._executor.env||{})[c]=g,this},w.prototype.stashList=function(c){return this._runTask(Li(S(arguments)||{},o(c)&&c||[]),m(arguments))};function pr(c,g,y,F){return typeof y!="string"?i(`git.${c}() requires a string 'repoPath'`):g(y,l(F,h),d(arguments))}w.prototype.clone=function(){return this._runTask(pr("clone",vt,...arguments),m(arguments))},w.prototype.mirror=function(){return this._runTask(pr("mirror",oe,...arguments),m(arguments))},w.prototype.mv=function(c,g){return this._runTask(Si(c,g),m(arguments))},w.prototype.checkoutLatestTag=function(c){var g=this;return this.pull(function(){g.tags(function(y,F){g.checkout(F.latest,c)})})},w.prototype.pull=function(c,g,y,F){return this._runTask(xi(l(c,h),l(g,h),d(arguments)),m(arguments))},w.prototype.fetch=function(c,g){return this._runTask(Oi(l(c,h),l(g,h),d(arguments)),m(arguments))},w.prototype.silent=function(c){return console.warn("simple-git deprecation notice: git.silent: logging should be configured using the `debug` library / `DEBUG` environment variable, this will be an error in version 3"),this},w.prototype.tags=function(c,g){return this._runTask(Hi(d(arguments)),m(arguments))},w.prototype.rebase=function(){return this._runTask(W(["rebase",...d(arguments)]),m(arguments))},w.prototype.reset=function(c){return this._runTask(qi(ji(c),d(arguments)),m(arguments))},w.prototype.revert=function(c){let g=m(arguments);return typeof c!="string"?this._runTask(i("Commit must be a string"),g):this._runTask(W(["revert",...d(arguments,0,!0),c]),g)},w.prototype.addTag=function(c){let g=typeof c=="string"?zi(c):i("Git.addTag requires a tag name");return this._runTask(g,m(arguments))},w.prototype.addAnnotatedTag=function(c,g){return this._runTask(Ui(c,g),m(arguments))},w.prototype.deleteLocalBranch=function(c,g,y){return this._runTask(ae(c,typeof g=="boolean"?g:!1),m(arguments))},w.prototype.deleteLocalBranches=function(c,g,y){return this._runTask(at(c,typeof g=="boolean"?g:!1),m(arguments))},w.prototype.branch=function(c,g){return this._runTask(P(d(arguments)),m(arguments))},w.prototype.branchLocal=function(c){return this._runTask(Q(),m(arguments))},w.prototype.raw=function(c){let g=!Array.isArray(c),y=[].slice.call(g?arguments:c,0);for(let U=0;U<y.length&&g;U++)if(!f(y[U])){y.splice(U,y.length-U);break}y.push(...d(arguments,0,!0));var F=m(arguments);return y.length?this._runTask(W(y,this._trimmed),F):this._runTask(i("Raw: must supply one or more command to execute"),F)},w.prototype.submoduleAdd=function(c,g,y){return this._runTask(Di(c,g),m(arguments))},w.prototype.submoduleUpdate=function(c,g){return this._runTask(Gi(d(arguments,!0)),m(arguments))},w.prototype.submoduleInit=function(c,g){return this._runTask(Ni(d(arguments,!0)),m(arguments))},w.prototype.subModule=function(c,g){return this._runTask($i(d(arguments)),m(arguments))},w.prototype.listRemote=function(){return this._runTask(Pi(d(arguments)),m(arguments))},w.prototype.addRemote=function(c,g,y){return this._runTask(Mi(c,g,d(arguments)),m(arguments))},w.prototype.removeRemote=function(c,g){return this._runTask(Bi(c),m(arguments))},w.prototype.getRemotes=function(c,g){return this._runTask(Ii(c===!0),m(arguments))},w.prototype.remote=function(c,g){return this._runTask(Fi(d(arguments)),m(arguments))},w.prototype.tag=function(c,g){let y=d(arguments);return y[0]!=="tag"&&y.unshift("tag"),this._runTask(W(y),m(arguments))},w.prototype.updateServerInfo=function(c){return this._runTask(W(["update-server-info"]),m(arguments))},w.prototype.pushTags=function(c,g){let y=Ai({remote:l(c,h)},d(arguments));return this._runTask(y,m(arguments))},w.prototype.rm=function(c){return this._runTask(W(["rm","-f",...u(c)]),m(arguments))},w.prototype.rmKeepLocal=function(c){return this._runTask(W(["rm","--cached",...u(c)]),m(arguments))},w.prototype.catFile=function(c,g){return this._catFile("utf-8",arguments)},w.prototype.binaryCatFile=function(){return this._catFile("buffer",arguments)},w.prototype._catFile=function(c,g){var y=m(g),F=["cat-file"],U=g[0];if(typeof U=="string")return this._runTask(i("Git.catFile: options must be supplied as an array of strings"),y);Array.isArray(U)&&F.push.apply(F,U);let ce=c==="buffer"?Wi(F):W(F);return this._runTask(ce,y)},w.prototype.diff=function(c,g){let y=h(c)?i("git.diff: supplying options as a single string is no longer supported, switch to an array of strings"):W(["diff",...d(arguments)]);return this._runTask(y,m(arguments))},w.prototype.diffSummary=function(){return this._runTask(Ri(d(arguments,1)),m(arguments))},w.prototype.applyPatch=function(c){let g=p(c)?x(u(c),d([].slice.call(arguments,1))):i("git.applyPatch requires one or more string patches as the first argument");return this._runTask(g,m(arguments))},w.prototype.revparse=function(){let c=["rev-parse",...d(arguments,!0)];return this._runTask(W(c,!0),m(arguments))},w.prototype.clean=function(c,g,y){let F=ue(c),U=F&&c.join("")||l(c,h)||"",ce=d([].slice.call(arguments,F?1:0));return this._runTask(Bt(U,ce),m(arguments))},w.prototype.exec=function(c){let g={commands:[],format:"utf-8",parser(){typeof c=="function"&&c()}};return this._runTask(g)},w.prototype.clearQueue=function(){return this},w.prototype.checkIgnore=function(c,g){return this._runTask(ot(u(l(c,p,[]))),m(arguments))},w.prototype.checkIsRepo=function(c,g){return this._runTask(lr(l(c,h)),m(arguments))},e.exports=w}}),fi={};C(fi,{esModuleFactory:()=>Hc,gitExportFactory:()=>Wc,gitInstanceFactory:()=>hi});function Hc(t){return Object.defineProperties(t,{__esModule:{value:!0},default:{value:t}})}function Wc(t){return Object.assign(t.bind(null),tn)}function hi(t,e){var r;let s=new rn,n=Ts(t&&(typeof t=="string"?{baseDir:t}:t)||{},e);if(!Ne(n.baseDir))throw new qe(n,"Cannot use simple-git on a directory that does not exist");return Array.isArray(n.config)&&s.add(vo(n.config)),s.add(go(n.unsafe)),s.add(Do()),s.add(_o(n.completion)),n.abort&&s.add(lo(n.abort)),n.progress&&s.add(Ao(n.progress)),n.timeout&&s.add(jo(n.timeout)),n.spawnOptions&&s.add(Fo(n.spawnOptions)),s.add(Mr(Oo(!0))),n.errors&&s.add(Mr(n.errors)),To(s,n.binary,(r=n.unsafe)==null?void 0:r.allowUnsafeCustomBinary),new di(n,s)}var di,mi=a({"src/lib/git-factory.ts"(){"use strict";co(),Lo(),No(),v(),di=zc()}}),gi={};C(gi,{gitP:()=>Vc});function Vc(...t){let e,r=Promise.resolve();try{e=hi(...t)}catch(f){r=Promise.reject(f)}function s(){return i}function n(){return r}let i=[...wi,...Be].reduce((f,h)=>{let p=Be.includes(h),l=p?u(h,e):o(h,e,f);return Object.defineProperty(f,h,{enumerable:!1,configurable:!1,value:e?l:p?n:s}),f},{});return i;function u(f,h){return function(...p){if(typeof p[p.length]=="function")throw new TypeError("Promise interface requires that handlers are not supplied inline, trailing function not allowed in call to "+f);return r.then(function(){return new Promise(function(l,d){let m=(S,x)=>{if(S)return d(Yc(S));l(x)};p.push(m),h[f].apply(h,p)})})}}function o(f,h,p){return(...l)=>(h[f](...l),p)}}function Yc(t){return t instanceof Error?t:typeof t=="string"?new Error(t):new nt(t)}var wi,Be,Jc=a({"src/lib/runners/promise-wrapped.ts"(){"use strict";gt(),mi(),wi=["customBinary","env","outputHandler","silent"],Be=["add","addAnnotatedTag","addConfig","addRemote","addTag","applyPatch","binaryCatFile","branch","branchLocal","catFile","checkIgnore","checkIsRepo","checkout","checkoutBranch","checkoutLatestTag","checkoutLocalBranch","clean","clone","commit","cwd","deleteLocalBranch","deleteLocalBranches","diff","diffSummary","exec","fetch","getRemotes","init","listConfig","listRemote","log","merge","mergeFromTo","mirror","mv","pull","push","pushTags","raw","rebase","remote","removeRemote","reset","revert","revparse","rm","rmKeepLocal","show","stash","stashList","status","subModule","submoduleAdd","submoduleInit","submoduleUpdate","tag","tags","updateServerInfo"]}}),{gitP:Qc}=(Jc(),T(gi)),{esModuleFactory:Xc,gitInstanceFactory:Kc,gitExportFactory:Zc}=(mi(),T(fi)),as=Xc(Zc(Kc));vi.exports=Object.assign(as,{gitP:Qc,simpleGit:as})});var _i=A((rp,bi)=>{"use strict";var Z=require("vscode"),tl=ur(),{exec:el}=require("child_process");async function rl(t){let e=Z.commands.registerCommand("extension.openJiraTicket",async()=>{sl()}),r=Z.window.createStatusBarItem(Z.StatusBarAlignment.Left,10001);r.text="$(notebook-render-output)  Ticket Jira",r.tooltip="Ouvrir le ticket Jira",r.command="extension.openJiraTicket",r.show(),t.subscriptions.push(r,e)}async function sl(){let t=Z.workspace.rootPath,r=await tl(t).branch((s,n)=>{let i=n.current;if(i){let u=/\d{5}/,o=i.match(u);if(o){let f=Z.workspace.getConfiguration("NeoteemExtension"),h=f.get("chromeProfile"),l=`${f.get("urlProject")}${o}`,m=`"C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe" --profile-directory="${h}" "${l}"`;el(m,(S,x,P)=>{S?console.error(`Error opening Chrome: ${S.message}`):console.log(`Chrome opened with profile: ${h}`)})}else Z.window.showErrorMessage("Aucun num\xE9ro de ticket trouv\xE9 dans le nom de la branche.");return o}else Z.window.showWarningMessage("You are not on any branch.")});Z.window.showWarningMessage(r)}bi.exports={OuvrirtTicketJira:rl}});var yi=A((sp,nl)=>{nl.exports={ws:"http://localhost:8083","ws-LOCAL":"http://localhost:8083","ws-TEST":"https://ws-test-u6jz7q4bga-ew.a.run.app","ws-PREPROD":"https://ws-preprod-sn36ra5rrq-ew.a.run.app","ws-DEV-2.6":"https://ws-dev-pkg4e5vseq-ew.a.run.app","ws-DEV-2.5":"https://ws-dev2-5-pkg4e5vseq-ew.a.run.app","ws-DEV-2.4":"https://ws-dev2-4-pkg4e5vseq-ew.a.run.app","ws-AGI":"https://ws-agi-cnze6dwr4a-ew.a.run.app","ws-ATRIUM-8":"https://ws-atrium8-yosvxhi3gq-ew.a.run.app","ws-ATRIUM-15":"https://ws-atrium15-s2257cef2q-ew.a.run.app","ws-ATRIUM-17":"https://ws-atrium17-uto2k4yt7q-ew.a.run.app","ws-ATRIUM-A2BCD":"https://ws-a2bcd-vhcoelr7oa-ew.a.run.app","ws-ATRIUM-PGLANCE":"https://ws-pglance-h67vc5d6sq-ew.a.run.app","ws-ATRIUM-PROGESTRA":"https://ws-progestra-wff45uig4q-ew.a.run.app","ws-ATRIUM-SEGINE":"https://ws-segine-ys76qo2xlq-ew.a.run.app","ws-ATRIUM-SOGI":"https://ws-sogi-srzcylkd5a-ew.a.run.app","ws-ATRIUM-SOGI-2":"https://ws-sogi2-foytq62t5a-ew.a.run.app","ws-ATRIUM-SOUTOUL":"https://ws-soutoul-qa77wetplq-ew.a.run.app","ws-BERGER":"https://ws-berger-uj5vdoguja-ew.a.run.app","ws-BGI":"https://ws-bgi-xb7juzsl4a-ew.a.run.app","ws-BGM":"https://ws-bgm-k6kk7dx24q-ew.a.run.app","ws-CARRON":"https://ws-carron-7pogsfqzla-ew.a.run.app","ws-CGIMMO-AMPHOUX":"https://ws-amphoux-23dg2shnxa-ew.a.run.app","ws-CGIMMO-CGENTREPRISE":"https://ws-cgentreprise-ihllkxlqrq-ew.a.run.app","ws-CGIMMO-CGIMMOBILIER":"https://ws-cgimmobilier-t3ztoucipq-ew.a.run.app","ws-CGIR":"https://ws-cgir-ktonsvi3aq-ew.a.run.app","ws-CIAD":"https://ws-ciad-kzmyfcbg5a-ew.a.run.app","ws-CILEAD":"https://ws-cilead-pp4xrk6ivq-ew.a.run.app","ws-COME":"https://ws-come-wzmowvlufq-ew.a.run.app","ws-DESAULLES":"https://ws-desaulles-pltnc72y2a-ew.a.run.app","ws-DURAND":"https://ws-durand-764ikxyana-ew.a.run.app","ws-DURANDIMMOMONTAGNE":"https://ws-durandimmomontagne-hulxi4pcfa-ew.a.run.app","ws-NEYRAT":"https://ws-neyrat-3sx673g5lq-ew.a.run.app","ws-FRANCHET":"https://ws-franchet-wetz2dcypq-ew.a.run.app","ws-GAURIAU":"https://ws-gauriau-tvhx275fpq-ew.a.run.app","ws-CGI-GRECH":"https://ws-grechimmo-ow2cjhcvtq-ew.a.run.app","ws-GRIFFATON":"https://ws-mxgriffaton-fjukapsz3q-ew.a.run.app","ws-I2MSYNDIC":"https://ws-i2msyndic-veqi3gxxma-ew.a.run.app","ws-IFNOR":"https://ws-ifnor-rmmmlshhsq-ew.a.run.app","ws-IMMEXIS-CARNOUX":"https://ws-carnouximmo-ydqo2n5lta-ew.a.run.app","ws-IMMEXIS-SIABIMMO":"https://ws-siabimmo-ydqo2n5lta-ew.a.run.app","ws-IMMEXIS-THINOT":"https://ws-thinot-ydqo2n5lta-ew.a.run.app","ws-IMMODEFRANCEFV":"https://ws-idf-dunnmiutiq-ew.a.run.app","ws-JPM":"https://ws-jpm-2n4q6pahsa-ew.a.run.app","ws-LEOPOLD":"https://ws-leopold-iqw5sccz4q-ew.a.run.app","ws-LOGESYC":"https://ws-logesyc-h6trdrbwaq-ew.a.run.app","ws-LOGESYC-4CANTONS":"https://ws-4cantons-h6trdrbwaq-ew.a.run.app","ws-MAZET":"https://ws-mazet-ep4yuuxh4q-ew.a.run.app","ws-MAZETDEUX":"https://ws-mazetdeux-ep4yuuxh4q-ew.a.run.app","ws-MAZET-BOETIEPARTNERS":"https://ws-boetiepartners-ep4yuuxh4q-ew.a.run.app","ws-MDC":"https://ws-mdc1-473nva46sq-ew.a.run.app","ws-MDC-F":"https://ws-mdcf-473nva46sq-ew.a.run.app","ws-MDC-DI":"https://ws-di-473nva46sq-ew.a.run.app","ws-MDC-PMR":"https://ws-pmr-473nva46sq-ew.a.run.app","ws-MOISON":"https://ws-moison-flluyvbwdq-ew.a.run.app","ws-OCIM":"https://ws-ocim-mmbnj277ma-ew.a.run.app","ws-OLLIADE":"https://ws-olliade-n25dnocbuq-ew.a.run.app","ws-PAUTRAT":"https://ws-pautrat-rpthcvmvbq-ew.a.run.app","ws-PIERRESDEPARIS":"https://ws-pierresdeparis-vjhzquhhqq-ew.a.run.app","ws-PLISSON":"https://ws-plisson-vrrohvgcia-ew.a.run.app","ws-RICHOU":"https://ws-richou-xfdlnqmpqq-ew.a.run.app","ws-RIFBJ":"https://ws-rifbj-yc4geal5gq-ew.a.run.app","ws-RIZZON-ICR54":"https://ws-icr54-azhjh4mbcq-ew.a.run.app","ws-RIZZON-ICR57":"https://ws-icr57-azhjh4mbcq-ew.a.run.app","ws-SEBASTIANIMMO":"https://ws-sebastianimmo-3bepjkeafq-ew.a.run.app","ws-SECGI":"https://ws-secgi-7ukrx4xlqq-ew.a.run.app","ws-SECGI-ATHENA":"https://ws-athena-7ukrx4xlqq-ew.a.run.app","ws-SOUPIZET":"https://ws-soupizet-n3mjqtze5a-ew.a.run.app","ws-SOUPIZETIMMO":"https://ws-soupizetimmo-n3mjqtze5a-ew.a.run.app","ws-SQH":"https://ws-sqh-fgctc4hd5q-ew.a.run.app","ws-SYMPLICE":"https://ws-symplice-yr4bbj5g4q-ew.a.run.app","ws-SYNALP":"https://ws-synalp-4vmvh3uxrq-ew.a.run.app","ws-THIEBAUD":"https://ws-thiebaud-uus5g3oplq-ew.a.run.app","ws-TRAVERSO-O":"https://ws-otraverso-7m75wouema-ew.a.run.app","ws-TRAVERSO-R":"https://ws-rtraverso-jhv2tjg3qq-ew.a.run.app","ws-TRAVERSO-V":"https://ws-vtraverso-ajauflqiba-ew.a.run.app","ws-THIERRY-TI":"https://ws-thierryti-x77dik4jea-ew.a.run.app","ws-THIERRY-TIA":"https://ws-thierrytia-x77dik4jea-ew.a.run.app","ws-THIERRY-TIB":"https://ws-thierrytib-x77dik4jea-ew.a.run.app"}});var Ti=A((ip,ki)=>{"use strict";var{json:np}=require("node:stream/consumers"),Ft=require("vscode"),cr=require("fs"),il=yi();async function al(t){let e=Ft.workspace.workspaceFolders[0].uri.fsPath+"/public/config/env.json",r={};try{r=require(e)}catch{try{cr.mkdirSync(Ft.workspace.workspaceFolders[0].uri.fsPath+"/public/config",{recursive:!0}),cr.writeFileSync(e,JSON.stringify(r,null,2))}catch(o){console.log(o)}}r={...il,...r};let s=r.ws,n=Object.keys(r).filter(u=>u!=="ws"),i=await Ft.window.showQuickPick(n,{placeHolder:`Selectionnez un WS (actuel: ${s})`});i&&(Ft.window.showInformationMessage(`WS selectionn\xE9: ${i} (${r[i]})`),r.ws=r[i],cr.writeFileSync(e,JSON.stringify(r,null,2)))}function ol(t){let e=Ft.commands.registerCommand("neoteem-tools.selectEnv",function(){al(t)});t.subscriptions.push(e)}ki.exports={SelectEnv:ol}});var Ei=A((ap,Ci)=>{"use strict";var wt=require("vscode"),ul=ur();function cl(t){let e=wt.commands.registerCommand("neoteem-tools.createBranch",async function(){let r=await wt.window.showInputBox({prompt:"Nom de la nouvelle branche"}),s=await wt.window.showInputBox({prompt:"Nom de la branche source"});if(r&&s){let n=ul();try{await n.checkout(s),await n.checkoutLocalBranch(r),wt.window.showInformationMessage(`Branche ${r} cr\xE9\xE9e \xE0 partir de ${s}`)}catch(i){wt.window.showErrorMessage(`Erreur lors de la cr\xE9ation de la branche: ${i.message}`)}}else wt.window.showErrorMessage("Le nom de la branche et la branche source sont requis")});t.subscriptions.push(e)}function ll(){}Ci.exports={createBranch:cl,deactivate:ll}});var{OuvrirProjetBB:pl}=hr(),{OuvrirtTicketJira:fl}=_i(),{SelectEnv:hl}=Ti(),{createBranch:dl}=Ei();async function ml(t){fl(t),pl(t),hl(t),dl(t)}module.exports={activate:ml};
